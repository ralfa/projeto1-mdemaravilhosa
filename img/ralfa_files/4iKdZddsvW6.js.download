if (self.CavalryLogger) { CavalryLogger.start_js(["dDeLV"]); }

__d("DockTabsViewportFantaTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=269;function i(){return h+1}function j(m){return Math.floor(m/h)}function k(m){if(!m)return null;var n=m.fantaTabModelStateGetter;return n?n():null}function l(m){return m?m.size:0}f.exports={getTabCountToFitWidth:j,getMinRequiredWidthForFirstFantaTab:i,getFantaTabModelFromCallbacks:k,getNumFantaTabsFromModel:l}}),null);
__d("DockTabsViewportPinnedConversationTabUtils",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=496+9+2,i=210+9+2,j=52;function k(){return h}function l(){return i}function m(){return j}function n(r){return r.getIsRaised()?k():l()}function o(){return k()+j}function p(r){var s=r||{},t=s.pinnedConvoTabStateGetter;return t?t():null}function q(r){return r?r.getTotalTabCount():0}f.exports={getRaisedPinnedConvoTabWidth:k,getLoweredPinnedConvoTabWidth:l,getPinnedConvoSelectorWidth:m,getPinnedConvoTabWidth:n,getMinRequiredWidthForFirstConvoTab:o,getPinnedConvoTabsStateFromCallbacks:p,getNumPinnedConvoTabsFromModel:q}}),null);
__d("DockTabsViewportCalculator",["csx","Arbiter","DataStore","Dock","DockTabsViewportFantaTabUtils","DockTabsViewportPinnedConversationTabUtils","DOM","Event","FullScreen","SubscriptionsHandler","Vector","ViewportBounds","ge","getViewportDimensions","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=50,j=35,k=j,l="dock-tab-viewport-inst",m=c("DockTabsViewportFantaTabUtils").getMinRequiredWidthForFirstFantaTab,n=c("DockTabsViewportFantaTabUtils").getFantaTabModelFromCallbacks,o=c("DockTabsViewportFantaTabUtils").getNumFantaTabsFromModel,p=c("DockTabsViewportPinnedConversationTabUtils").getMinRequiredWidthForFirstConvoTab,q=c("DockTabsViewportPinnedConversationTabUtils").getNumPinnedConvoTabsFromModel,r=c("DockTabsViewportPinnedConversationTabUtils").getPinnedConvoTabsStateFromCallbacks;function s(u){return u?c("Vector").getElementDimensions(u).x:0}function t(u){__p&&__p();this.$DockTabsViewportCalculatorImpl1=u;this.$DockTabsViewportCalculatorImpl3=0;this.$DockTabsViewportCalculatorImpl4=0;this.$DockTabsViewportCalculatorImpl5=null;this.$DockTabsViewportCalculatorImpl6=null;this.$DockTabsViewportCalculatorImpl7=false;this.$DockTabsViewportCalculatorImpl8=false;this.$DockTabsViewportCalculatorImpl9=false;this.$DockTabsViewportCalculatorImpl2=new(c("SubscriptionsHandler"))();this.$DockTabsViewportCalculatorImpl10();this.$DockTabsViewportCalculatorImpl11()}t.prototype.$DockTabsViewportCalculatorImpl10=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl12.bind(this);this.$DockTabsViewportCalculatorImpl2.addSubscriptions(c("Event").listen(window,"resize",u),c("Dock").subscribe("resize",u),c("Arbiter").subscribeOnce("sidebar/initialized",u,c("Arbiter").SUBSCRIBE_NEW),c("FullScreen").subscribe("changed",function(){__p&&__p();if(c("FullScreen").isFullScreen()){this.$DockTabsViewportCalculatorImpl7=true;this.$DockTabsViewportCalculatorImpl8=false}else{this.$DockTabsViewportCalculatorImpl7=false;if(this.$DockTabsViewportCalculatorImpl8){c("setImmediate")(function(){u()});this.$DockTabsViewportCalculatorImpl8=false}}}.bind(this)))};t.prototype.registerFantaTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl5=u};t.prototype.registerPinnedConvoTabCallbacks=function(u){this.$DockTabsViewportCalculatorImpl6=u};t.prototype.forceRecalculateFBDockWidth=function(){this.$DockTabsViewportCalculatorImpl11();this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:false,pinnedConvoUpdateData:null})};t.prototype.forceRecalculateChatTabs=function(){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:null})};t.prototype.forceRecalculatePinnedConvoTabs=function(u){this.$DockTabsViewportCalculatorImpl13({forceRecalculateChatTabs:true,pinnedConvoUpdateData:u})};t.prototype.$DockTabsViewportCalculatorImpl12=function(){if(c("FullScreen").isFullScreen()||this.$DockTabsViewportCalculatorImpl7){this.$DockTabsViewportCalculatorImpl8=true;return}this.forceRecalculateFBDockWidth()};t.prototype.$DockTabsViewportCalculatorImpl13=function(u){var v=u.forceRecalculateChatTabs,w=u.pinnedConvoUpdateData,x=this.$DockTabsViewportCalculatorImpl14(),y=x.chatTabAvailableWidth,z=x.pinnedConvoTabAvailableWidth;this.$DockTabsViewportCalculatorImpl15(y,!!v);this.$DockTabsViewportCalculatorImpl16(z,w)};t.prototype.$DockTabsViewportCalculatorImpl16=function(u,v){var w=this.$DockTabsViewportCalculatorImpl6||{},x=w.onAvailableWidthChanged;x&&x(u,v)};t.prototype.$DockTabsViewportCalculatorImpl15=function(u,v){var w=this.$DockTabsViewportCalculatorImpl5||{},x=w.onAvailableWidthChanged;x&&x(u)};t.prototype.$DockTabsViewportCalculatorImpl17=function(){var u=n(this.$DockTabsViewportCalculatorImpl5);return o(u)};t.prototype.$DockTabsViewportCalculatorImpl18=function(){return m()};t.prototype.$DockTabsViewportCalculatorImpl14=function(){__p&&__p();var u=this.$DockTabsViewportCalculatorImpl3,v={chatTabAvailableWidth:u,pinnedConvoTabAvailableWidth:0},w={chatTabAvailableWidth:0,pinnedConvoTabAvailableWidth:u},x=this.$DockTabsViewportCalculatorImpl17(),y=r(this.$DockTabsViewportCalculatorImpl6),z=q(y);if(!y||z===0)return v;else if(x===0)return w;var A=this.$DockTabsViewportCalculatorImpl18();if(u<=A)return v;var B=p(),C=u-A,D=0;if(C<B)return v;else D=B;var E=D,F=Math.max(A,u-D);return{chatTabAvailableWidth:F,pinnedConvoTabAvailableWidth:E}};t.prototype.$DockTabsViewportCalculatorImpl11=function(){this.$DockTabsViewportCalculatorImpl3=this.$DockTabsViewportCalculatorImpl19();this.$DockTabsViewportCalculatorImpl20("DockTabsViewportCalculator/recalcTotalDock_FOR_TEST_ONLY")};t.prototype.$DockTabsViewportCalculatorImpl21=function(){var u=this.$DockTabsViewportCalculatorImpl1;if(!u)return{buddyListNubWidth:0,employeeNubsWidth:0};var v=s(u),w=s(c("DOM").find(u,"._56ox")),x=s(c("DOM").scry(u,"._56oy")[0]),y=s(c("DOM").scry(u,"._ph1")[0]),z=Math.max(v-w-x-y,0);return{buddyListNubWidth:w,employeeNubsWidth:z}};t.prototype.$DockTabsViewportCalculatorImpl19=function(){var u=c("getViewportDimensions").withoutScrollbars().width;u-=c("ViewportBounds").getLeft()+c("ViewportBounds").getRight();u-=i;var v=this.$DockTabsViewportCalculatorImpl21(),w=v.buddyListNubWidth,x=v.employeeNubsWidth;u-=w;this.$DockTabsViewportCalculatorImpl4=Math.max(this.$DockTabsViewportCalculatorImpl4,x);u-=this.$DockTabsViewportCalculatorImpl4;u-=k;return Math.max(u,0)};t.prototype.enableTestInforms_FOR_TEST_ONLY=function(){this.$DockTabsViewportCalculatorImpl9=true};t.prototype.$DockTabsViewportCalculatorImpl20=function(u){if(this.$DockTabsViewportCalculatorImpl9)c("Arbiter").inform(u)};t.prototype.getChatTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().chatTabAvailableWidth};t.prototype.getPinnedConvoTabAvailableDockWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl14().pinnedConvoTabAvailableWidth};t.prototype.getAvailableTotalWidth_FOR_TEST_ONLY=function(){return this.$DockTabsViewportCalculatorImpl3};f.exports={getInstance:function u(v){__p&&__p();var w=c("ge")("pagelet_dock");if(!w||!c("DOM").contains(w,v))return null;var x=c("DataStore").get(w,l);if(x instanceof t)return x;var y=c("DOM").scry(w,".fbDockWrapperRight .fbDock")[0];x=new t(y);c("DataStore").set(w,l,x);return x}}}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c("MercuryIDs").getUserIDFromThreadID(j);if(m)k=c("ShortProfiles").getNow(m);return l===c("AvailableListConstants").ACTIVE&&(k===undefined||k===null||!k.is_messenger_only)},getStatus:function h(i,j){__p&&__p();var k=c("AvailableListConstants").OFFLINE,l=c("MercuryIDs").getUserIDFromThreadID(j);if(l)k=c("PresenceStatus").get(l);else if(i){var m=i.participants.map(function(n){return c("MercuryIDs").getUserIDFromParticipantID(n)});k=c("PresenceStatus").getGroup(m)}if(!c("ChatVisibility").isOnline())k=c("AvailableListConstants").OFFLINE;return k}}}),null);
__d("FBRTCCallControlActions",["FBRTCDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({ACCEPT_ESCALATION:null,HANG_UP:null,PARENT_WINDOW_START_CALL:null,TOGGLE_FULL_SCREEN:null,TOGGLE_MUTE_AUDIO:null,TOGGLE_MUTE_VIDEO:null,TOGGLE_SCREEN_SHARING:null,TOGGLE_SELF_VIEW:null,SHOW_SETTINGS:null,START_CALL:null,DECLINE_ESCALATION:null,RECEIVED_SIGNALING_MESSAGE:null,RESET_CALL:null,OPEN_SCREEN_IN_NEW:null,CLOSE_STANDALONE_SCREEN:null,REDIAL_CALL:null}),i={Types:h,hangUp:function j(){c("FBRTCDispatcher").dispatch({type:h.HANG_UP})},toggleMuteAudio:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_MUTE_AUDIO})},toggleMuteVideo:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_MUTE_VIDEO})},toggleFullScreen:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_FULL_SCREEN})},toggleSelfView:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_SELF_VIEW})},showSettings:function j(){c("FBRTCDispatcher").dispatch({type:h.SHOW_SETTINGS})},toggleScreenSharing:function j(){c("FBRTCDispatcher").dispatch({type:h.TOGGLE_SCREEN_SHARING})},startCall:function j(){c("FBRTCDispatcher").dispatch({type:h.START_CALL})},openScreenInNewWindow:function j(){c("FBRTCDispatcher").dispatch({type:h.OPEN_SCREEN_IN_NEW})},receivedSignalingMessage:function j(k){c("FBRTCDispatcher").dispatch({type:h.RECEIVED_SIGNALING_MESSAGE,message_type:k.msgType,message:k})},acceptEscalation:function j(){c("FBRTCDispatcher").dispatch({type:h.ACCEPT_ESCALATION})},declineEscalation:function j(){c("FBRTCDispatcher").dispatch({type:h.DECLINE_ESCALATION})},resetCall:function j(k){c("FBRTCDispatcher").dispatch({type:h.RESET_CALL,trigger:k})},redialCall:function j(){c("FBRTCDispatcher").dispatch({type:h.REDIAL_CALL})},parentWindowStartCall:function j(){c("FBRTCDispatcher").dispatch({type:h.PARENT_WINDOW_START_CALL})}};f.exports=i}),null);
__d("FBRTCStruct",[],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(j,k,l){__p&&__p();var m=void 0,n=void 0;if(typeof j=="string"||j instanceof String){n=j;m=j}else for(var o in j)if(Object.prototype.hasOwnProperty.call(j,o))if(o==="index")l=j[o];else{n=o;m=j[o]}k[n]=l;k.strNames[l]=m};function i(j){"use strict";this.strNames=[];for(var k=0;k<j.length;k++)h(j[k],this,k)}f.exports=i}),null);
__d("FBRTCConstants",["FBRTCStruct","keyMirror"],(function a(b,c,d,e,f,g){__p&&__p();var h=Object.freeze({OFFER:"offer",ANSWER:"answer",ICE_CANDIDATE:"ice_candidate",OK:"ok",PING:"ping",PING_ACK:"ping_ack",HANGUP:"hang_up",OTHER_DISMISS:"other_dismiss",MSG_ACK:"msg_ack",PRANSWER:"pranswer",ICERESTART_OFFER:"icerestart_offer",ICERESTART_ANSWER:"icerestart_answer",PCRESTART_OFFER:"pcrestart_offer",PCRESTART_ANSWER:"pcrestart_answer",SDP_UPDATE:"sdp_update",OFFER_ACK:"offer_ack",OFFER_NACK:"offer_nack",ANSWER_ACK:"answer_ack",SET_VIDEO:"set_video",VIDEO_REQUEST:"video_request",ACK:"ack",SWITCH_TO_MULTIWAY:"switch_to_multiway"}),i=Object.freeze({CHILD_WINDOW_READY:"rtc_child_window_ready",CHILD_WINDOW_START_CALL:"rtc_child_window_start_call",CHILD_WINDOW_MESSAGE:"rtc_child_window_message"}),j=Object.freeze({DIRECT_VIDEO:"direct_video",ESCALATED:"escalated",ESCALATION_DECLINED:"escalation_declined",VOIP:"voip"}),k=Object.freeze({LL_NONE:0,LL_BASIC:1,LL_DEBUG:2,LL_WARNING:3,LL_INFO:4,LL_VERBOSE:5}),l=Object.freeze({AUDIO_ONLY:"audio_only",AUDIO_VIDEO:"audio_video",SCREEN_CONTENT:"screen"}),m=Object.freeze({CUSTOM_VIDEO_STREAM_SIZE:"CUSTOM_VIDEO_STREAM_SIZE",CUSTOM_VIDEO:"CUSTOM_VIDEO",FHD_VIDEO:"FHD_VIDEO",HD_VIDEO:"HD_VIDEO",LQ_VIDEO:"LQ_VIDEO",NO_VIDEO:"NO_VIDEO",SD_VIDEO:"SD_VIDEO"}),n=Object.freeze({BALL_IS_LIFE:"BallIsLifeEffect",TRIANGLE_FRAME:"TriangleFrameEffect",SNOW_FALLING:"SnowFallingEffect"}),o=Object.freeze({FHD_HEIGHT:1080,HD_HEIGHT:720,LQ_HEIGHT:180,SD_HEIGHT:480,FHD_WIDTH:1920,HD_WIDTH:1280,LQ_WIDTH:320,SD_WIDTH:848,VLQ_FRAME_RATE:5,LQ_FRAME_RATE:15,FRAME_RATE:30}),p=new(c("FBRTCStruct"))([{IGNORE_CALL:"IgnoreCall"},{HANGUP_CALL:"HangupCall"},{IN_ANOTHER_CALL:"InAnotherCall"},{ACCEPT_AFTER_HANGUP:"CallEndAcceptAfterHangUp"},{NO_ANSWER_TIMEOUT:"NoAnswerTimeout"},{INCOMING_TIMEOUT:"IncomingTimeout"},{OTHER_INSTANCE_HANDLED:"OtherInstanceHandled"},{SIGNALING_MESSAGE_FAILED:"SignalingMessageFailed"},{CONNECTION_DROPPED:"ConnectionDropped"},{CLIENT_INTERRUPTED:"ClientInterrupted"},{WEBRTC_ERROR:"WebRTCError"},{CLIENT_ERROR:"ClientError"},{NO_PERMISSION:"NoPermission"},{OTHER_NOT_CAPABLE:"OtherNotCapable"},{NO_UI_ERROR:"NoUIShown"},{UNSUPPORTED_VERSION:"VersionUnsupported"},{CALLER_NOT_VISIBLE:"CallerNotVisible"},{CARRIER_BLOCKED:"CarrierBlocked"},{OTHER_CARRIER_BLOCKED:"OtherCarrierBlocked"}]),q=Object.freeze({REMOTE_PEER_HANGUP:"CollabRemotePeerHangup",REMOTE_PEER_REJECT:"CollabRemotePeerReject",CLOSED_BY_MCU:"CollabClosedByMcu",CLOSED_AS_STALE:"CollabClosedAsStale",CALL_INITIALIZATION_FAILED:"CollabCallInitializationFailed",SIP_CONNECTION_INITIALIZATION_FAILED:"CollabSipConnectionInitializationFailed",LOST_MCU_CONNECTION:"CollabLostMcuConnection",MCU_NO_AUDIO_STREAM:"CollabMcuNoAudioStream",MCU_INVALID_STREAM_CONFIGURATION:"CollabMcuInvalidStreamConfiguration",LOST_MCU_THRIFT_CONNECTION:"CollabLostMcuThriftConnection",LOST_SIP_ADAPTER_CONNECTION:"CollabLostSipAdapterConnection",UNKNOWN:"CollabUnknown"}),r=Object.freeze({TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10}),s=Object.freeze({ONE_HOUR:"1hour",UNTIL_EIGHT_AM:"8am",ALWAYS:"always"}),t=c("keyMirror")({AUDIO:null,VIDEO:null}),u=Object.freeze({CUSTOM:"custom",MULTIWAY:"multiway",P2P:"p2p"}),v=Object.freeze({NEW:"new",CHECKING:"checking",CONNECTED:"connected",COMPLETED:"completed",FAILED:"failed",DISCONNECTED:"disconnected",CLOSED:"closed"}),w=Object.freeze({DOMINANT_SPEAKER:"DOMINANT_SPEAKER",GRID:"GRID"}),x={CallBlockingConstants:s,CallEndReason:p,CallType:j,ChildWindowMessageType:i,CollabCallEndSubreason:q,GroupVideoViewLayout:w,IceConnectionState:v,IncomingCallDialogTypes:t,PayloadType:h,RTCConstraints:o,SignalingProtocol:u,StreamType:l,UIEventType:r,UploadLogLevel:k,VideoFilterEffect:n,VideoQuality:m,convertFromUploadLogLevel:function y(z){switch(z){case k.LL_DEBUG:return"d";case k.LL_BASIC:return"b";case k.LL_WARNING:return"w";case k.LL_INFO:return"i";case k.LL_VERBOSE:return"v";case k.LL_NONE:default:return null}},convertToUploadLogLevel:function y(z){switch(z){case"d":return k.LL_DEBUG;case"b":return k.LL_BASIC;case"w":return k.LL_WARNING;case"i":return k.LL_INFO;case"v":return k.LL_VERBOSE;default:return k.LL_NONE}},uploadLogLevelString:function y(z){switch(z){case k.LL_BASIC:return"basic";case k.LL_DEBUG:return"debug";case k.LL_WARNING:return"warning";case k.LL_INFO:return"info";case k.LL_VERBOSE:return"verbose";default:return""}},endCallReasonFromString:function y(z){return p.strNames.indexOf(z)},callEndReasonString:function y(z){if(z<0||z>p.strNames.length)return"Unknown";return p.strNames[z]},fullCallEndReasonString:function y(z,A){return this.callEndReasonString(z)+"_"+(A?"remote":"local")}};f.exports=x}),null);
__d("RTCCallActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CALL:"CALL",CALL_SUCCESS:"CALL_SUCCESS",CALL_ERROR:"CALL_ERROR",INCOMING_CALL_SUCCESS:"INCOMING_CALL_SUCCESS",INIT:"INIT",RESET:"RESET",WAIT_FOR_USER_INPUT:"WAIT_FOR_USER_INPUT",SET_CALL_SUMMARY:"SET_CALL_SUMMARY",SET_MW_CALL_TYPE:"SET_MW_CALL_TYPE",SET_LAYOUT:"SET_LAYOUT",SET_DOMINANT_SPEAKER:"SET_DOMINANT_SPEAKER",SET_PINNED_SPEAKER:"SET_PINNED_SPEAKER",SET_USE_DOMINANT_SPEAKE_VIEW:"SET_USE_DOMINANT_SPEAKE_VIEW",SET_GRID_VIEW:"SET_GRID_VIEW",SET_STRIP_VIEW:"SET_STRIP_VIEW",INIT_THREAD:"INIT_THREAD",ON_PARTICIPANT_LEFT:"ON_PARTICIPANT_LEFT",ON_PARTICIPANTS_ADDED:"ON_PARTICIPANTS_ADDED",ADD_PARTICIPANTS_TO_RING:"ADD_PARTICIPANTS_TO_RING",JOIN:"JOIN",JOIN_SUCCESS:"JOIN_SUCCESS",JOIN_ERROR:"JOIN_ERROR",HANGUP:"HANGUP",HANGUP_SUCCESS:"HANGUP_SUCCESS",HANGUP_ERROR:"HANGUP_ERROR",ON_CONFERENCE_STATE:"ON_CONFERENCE_STATE",DISMISS:"DISMISS",END_CALL:"END_CALL",ON_JOIN_REQUEST_SENT:"ON_JOIN_REQUEST_SENT",ON_JOIN_RESPONSE:"ON_JOIN_RESPONSE",ON_SERVER_MEDIA_UPDATE_SUCCESS:"ON_SERVER_MEDIA_UPDATE_SUCCESS",ON_CLIENT_MEDIA_UPDATE_RESPONSE:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",INIT_LOCAL_USER:"INIT_LOCAL_USER",INIT_REMOTE_USERS:"INIT_REMOTE_USERS",ADD_REMOTE_STREAM:"ADD_REMOTE_STREAM",REMOVE_REMOTE_STREAM:"REMOVE_REMOTE_STREAM",REMOVE_ALL_REMOTE_STREAMS:"REMOVE_ALL_REMOTE_STREAMS",SET_PREFERRED_REMOTE_STREAM:"SET_PREFERRED_REMOTE_STREAM",ADD_REMOTE_TRACK:"ADD_REMOTE_TRACK",REMOVE_REMOTE_TRACK:"REMOVE_REMOTE_TRACK",AUDIO_MUTED:"AUDIO_MUTED",AUDIO_UNMUTED:"AUDIO_UNMUTED",VIDEO_MUTED:"VIDEO_MUTED",VIDEO_UNMUTED:"VIDEO_UNMUTED",REMOTE_VIDEO_MUTED:"REMOTE_VIDEO_MUTED",REMOTE_VIDEO_UNMUTED:"REMOTE_VIDEO_UNMUTED",SELF_VIEW_COLLAPSED:"SELF_VIEW_COLLAPSED",SELF_VIEW_UNCOLLAPSED:"SELF_VIEW_UNCOLLAPSED",ADD_LOCAL_STREAM:"ADD_LOCAL_STREAM",REMOVE_LOCAL_STREAM:"REMOVE_LOCAL_STREAM",REPLACE_LOCAL_STREAM:"REPLACE_LOCAL_STREAM",REMOVE_ALL_LOCAL_STREAMS:"REMOVE_ALL_LOCAL_STREAMS",SET_PREFERRED_LOCAL_STREAM:"SET_PREFERRED_LOCAL_STREAM",ADD_LOCAL_SCREEN_STREAM:"ADD_LOCAL_SCREEN_STREAM",REMOVE_LOCAL_SCREEN_STREAM:"REMOVE_LOCAL_SCREEN_STREAM",REMOVE_ALL_LOCAL_SCREEN_STREAMS:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",REPLACE_LOCAL_SCREEN_STREAM:"REPLACE_LOCAL_SCREEN_STREAM",ADD_REMOTE_SCREEN_STREAM:"ADD_REMOTE_SCREEN_STREAM",REMOVE_REMOTE_SCREEN_STREAM:"REMOVE_REMOTE_SCREEN_STREAM",TOGGLE_REMOTE_STREAM:"TOGGLE_REMOTE_STREAM",SUBMIT_RATING:"SUBMIT_RATING",SUBMIT_FEEDBACK:"SUBMIT_FEEDBACK",RATING_SHOWN:"RATING_SHOWN",FEEDBACK_SHOWN:"FEEDBACK_SHOWN",SET_CONFERENCE_STATE:"SET_CONFERENCE_STATE",SET_END_CALL_REASON:"SET_END_CALL_REASON"})}),null);
__d("RTCP2PCallActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({P2P_DISMISS_NUX:"P2P_DISMISS_NUX",P2P_INIT_NUX_STATE:"P2P_INIT_NUX_STATE",P2P_MARK_NUX_VIEWED:"P2P_MARK_NUX_VIEWED",P2P_PROCESS_MESSAGE:"P2P_PROCESS_MESSAGE",P2P_SET_IS_CALLER:"P2P_SET_IS_CALLER",P2P_STAR_RATING_DONE:"P2P_STAR_RATING_DONE",POP_IN_SCREEN_CONTENT:"POP_IN_SCREEN_CONTENT",POP_OUT_SCREEN_CONTENT:"POP_OUT_SCREEN_CONTENT",SET_CALL_TYPE:"SET_CALL_TYPE",SET_CONNECTION_STATUS:"SET_CONNECTION_STATUS",SET_MULTIWAY_ESCALATION_SUPPORT:"SET_MULTIWAY_ESCALATION_SUPPORT",SET_REMOTE_SIGNALING_EXPERIMENTS:"SET_REMOTE_SIGNALING_EXPERIMENTS",SET_VIDEO_QUALITY:"SET_VIDEO_QUALITY"})}),null);
__d("RTCP2PCallEscalationActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({P2P_CALL_ESCALATION_ACK:"P2P_CALL_ESCALATION_ACK",P2P_CALL_ESCALATION_FAILURE:"P2P_CALL_ESCALATION_FAILURE",P2P_CALL_ESCALATION_SET_REQUEST:"P2P_CALL_ESCALATION_SET_REQUEST",P2P_CALL_ESCALATION_SET_RESPONSE:"P2P_CALL_ESCALATION_SET_RESPONSE",P2P_CALL_ESCALATION_START:"P2P_CALL_ESCALATION_START",P2P_CALL_ESCALATION_SUCCESS:"P2P_CALL_ESCALATION_SUCCESS"})}),null);
__d("FBRTCExperiment",["FBRTCExperimentsConfig","QE2Logger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.gen=function(i){var j={params:{},auto_exposure:false,in_experiment:false},k=c("FBRTCExperimentsConfig")[i]||j,l=new h(i,k);return l};function h(i,j){this.$FBRTCExperiment1=i;this.$FBRTCExperiment2=j}h.prototype.$FBRTCExperiment3=function(){if(this.$FBRTCExperiment2.auto_exposure)this.logExposure()};h.prototype.logExposure=function(){if(this.$FBRTCExperiment2.in_experiment)c("QE2Logger").logExposureForUser(this.$FBRTCExperiment1)};h.prototype.getParam=function(i,j){if(this.$FBRTCExperiment2.params[i]!==undefined){this.$FBRTCExperiment3();return this.$FBRTCExperiment2.params[i].toString()}return j};h.prototype.getInt=function(i,j){if(this.$FBRTCExperiment2.params[i]!==undefined){this.$FBRTCExperiment3();return parseInt(this.$FBRTCExperiment2.params[i],10)}return j};h.prototype.getBool=function(i,j){var k=this.$FBRTCExperiment2.params;if(k[i]!==undefined){this.$FBRTCExperiment3();return k[i]==="1"||k[i]===1||k[i]==="true"||k[i]===true}return j};f.exports=h}),null);
__d("FBRTCSdpUtils",["FBLogger","UserAgent"],(function a(b,c,d,e,f,g){__p&&__p();var h="m=video 0",i=["audio","video"].map(function(x){return new RegExp("m="+x+"\\s+\\d+\\s+(\\w+\\/?)+(\\s+\\d+)+")}),j=i[0],k=i[1],l=["http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01","http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time","http://www.webrtc.org/experiments/rtp-hdrext/playout-delay","urn:3gpp:video-orientation","urn:ietf:params:rtp-hdrext:ssrc-audio-level","urn:ietf:params:rtp-hdrext:toffset"],m=function m(x){return x.match(/^a=rtpmap:(\d+)\s/)[1]},n=function n(x,y,z){var A=m(x[y]),B=x[z].split("RTP/SAVPF"),C=B[1].split(/\s+/),D=C.indexOf(A);C.splice(D,1);B[1]=C.join(" ");x[z]=B.join("RTP/SAVPF");x.splice(y,1)},o=function o(x,y,z){__p&&__p();var A=m(x[y]);n(x,y,z);var B=new RegExp("^a=(rtcp-fb|fmtp):"+A+" ");x=x.filter(function(F){return!B.test(F)});var C=new RegExp("^a=fmtp:(\\d+)\\s+apt="+A+"($|;)"),D=x.reduce(function(D,F,G){var H=F.match(C);return H?[].concat(D,[H[1]]):D},[]).join("|"),E=new RegExp("^a=rtpmap:("+D+")\\s+rtx/|^a=fmtp:("+D+")\\s+apt=");return x.filter(function(F){return!E.test(F)})},p={RX_SDP_MEDIA_AUDIO:j,RX_SDP_MEDIA_VIDEO:k,replaceRTPSAVPFProfile:function x(y){var z="UDP/TLS/RTP/SAVPF",A="RTP/SAVPF";while(y.indexOf(z)>=0)y=y.replace(z,A);return y},addIceOptionToSdp:function x(y,z){"use strict";__p&&__p();var A="a=ice-options:",B=y.indexOf(A);if(B>=0)return y.split("\r\n").map(function(I){return I.startsWith(A)?I+" "+z:I}).join("\r\n");var C=A+z,D=y.split("\r\n"),E=false,F=-1;for(var G=0;G<D.length;G++){var H=D[G].slice(0,2);if(H=="s="){E=true;continue}if(E&&H=="a="){F=G;break}}if(F>=0){D.splice(F,0,C);return D.join("\r\n")}return[y,C,"\r\n"].join("")},preferIsac:function x(y){__p&&__p();var z=y.split("\r\n"),A=-1,B=-1,C=-1;for(var D=0;D<z.length;D++){var E=z[D];if(E.match(j))A=D;if(C===-1&&A>-1&&E.match(/^a=rtpmap:/))C=D;if(E.match(/^a=rtpmap:\d+\s+ISAC\/16000/))B=D}if(A===-1||B===-1||C===-1||z[A].indexOf("RTP/SAVPF")===-1)return z.join("\r\n");var F=z[B];n(z,B,A);z.splice(C,0,F);z[A]=z[A].replace("RTP/SAVPF","RTP/SAVPF "+m(F));return z.join("\r\n")},preferCodec:function x(y,z,A){__p&&__p();var B,C=y.split("\r\n"),D=A?k:j,E=C.findIndex(function(F){return D.test(F)});if(E!==-1&&C[E].indexOf("RTP/SAVPF")!==-1)(function(){var F=new RegExp("^a=rtpmap:\\d+\\s+"+z),G=C.findIndex(function(K){return F.test(K)}),H=/^a=rtpmap:/,I=C.findIndex(function(K,L){return L>E&&H.test(K)});if(G!==-1&&I!==-1){var J=C[G];n(C,G,E);C.splice(I,0,J);C[E]=C[E].replace("RTP/SAVPF","RTP/SAVPF "+m(J))}})();return C.join("\r\n")},disableVideo:function x(y){var z=/m=video\s+\S+/;y=y.replace(z,h);if(c("UserAgent").isBrowser("Firefox <= 37"))y=this._makeDisabledVideoReceiveOnly(y);return y},_makeDisabledVideoReceiveOnly:function x(y){if(y.indexOf(h)>-1){var z=y.split(h);z[1]=z[1].replace(/send(recv|only)/,"recvonly");y=z.join(h)}return y},fixMobileIceSdp:function x(y){__p&&__p();y=y.replace(/^a=/,"");y=y.split(/\s+username\s+.+password.+/)[0];var z=y.match(/\s+relay\s+|\s+srflx\s+/),A=y.match(/raddr.+rport.+/);if(z&&!A){z=z[0];var B=y.split(z),C=B[1].match(/^(\d+\.\d+\.\d+\.\d+)\s+(\d+)\s+/),D=void 0,E=void 0;if(C){D=C[1];E=C[2];B[1]=B[1].replace(C[0],"")}else{C=B[0].split(/\s+/);D=C[4];E=C[5]}y=""+B[0]+z+"raddr "+D+" rport "+E+" "+B[1]}return y},addAudioNack:function x(y){__p&&__p();var z=[];y=y.split("\r\n").map(function(A){var B="";if(z.length>0&&(/^a=rtpmap:(\d+)/.test(A)||/^a=ssrc/.test(A)||/^m=/.test(A))){B+=this._getrtcpFeedbackLinesFromAudioFMTs(z)+"\r\n";z=[]}if(/^m=audio/.test(A))z=A.match(/^m=audio\s+[\d\/]+\s+[\w\/]+([\s+\d+]+)/)[1].trim().split(" ");return B+A}.bind(this)).join("\r\n");if(z.length>0)y+="\r\n"+this._getrtcpFeedbackLinesFromAudioFMTs(z);return y},addSetup:function x(y){if(y.indexOf("a=setup:")>=0)return y;var z=y.split("\r\n"),A=z.findIndex(function(C){return C.startsWith("s=")}),B=z.findIndex(function(C,D){return D>A&&C.startsWith("a=")});z.splice(B,0,"a=setup:actpass");return z.join("\r\n")},_replaceFmtp:function x(y,z,A,B){var C=y==z?[]:y.substr(z.length).split(";"),D=C.findIndex(function(F){return F.startsWith(A+"=")}),E=A+"="+B;if(D<0)C.push(E);else C[D]=E;return""+z+C.join(";")},_addFmtpToMediaSection:function x(y,z,A,B){__p&&__p();var C=new RegExp("^a=rtpmap:(\\d+)\\s"+z),D=y.findIndex(function(I){return I.match(C)});if(D<0)return y;var E=y[D].match(C),F=E[1],G="a=fmtp:"+F+" ",H=y.findIndex(function(I){return I.startsWith(G)});if(H===-1){H=D+1;y.splice(H,0,G)}y[H]=this._replaceFmtp(y[H],G,A,B);return y},addFmtp:function x(y,z,A,B){__p&&__p();var C=y.split("\r\n"),D=-1;for(var E=0;E<=C.length;E++)if(E===C.length||C[E].startsWith("m=")){if(D!==-1){var F=C.splice(D,E-D),G=this._addFmtpToMediaSection(F,z,A,B);C.splice.apply(C,[D,0].concat(G));E=D+1+G.length}D=E}return C.join("\r\n")},_getrtcpFeedbackLinesFromAudioFMTs:function x(y){return y.map(function(z){return"a=rtcp-fb:"+z+" nack"}).join("\r\n")},removeFEC:function x(y){__p&&__p();var z=y.split("\r\n"),A=void 0,B=void 0;for(var C=0;C<z.length;C++){if(z[C].match(/^a=rtpmap:\d+\s+red\//))A=C;if(z[C].match(/^m=video/))B=C}if(A&&B)n(z,A,B);return z.join("\r\n")},removeH264:function x(y){__p&&__p();var z,A=y,B=function B(){var C=A.split("\r\n"),D=/^a=rtpmap:\d+\s+H264\//,E=C.findIndex(function(H){return D.test(H)}),F=/^m=video/,G=C.findIndex(function(H){return F.test(H)});if(E==-1||G==-1)return"break";A=o(C,E,G).join("\r\n")};do{var z=B();if(z==="break")break}while(true);return A},removeVP9:function x(y){var z=y.split("\r\n"),A=/^a=rtpmap:\d+\s+VP9\//,B=z.findIndex(function(E){return A.test(E)}),C=/^m=video/,D=z.findIndex(function(E){return C.test(E)});return B!==-1&&D!==-1?o(z,B,D).join("\r\n"):y},removeUnknownRtpHeaderExtensions:function x(y){var z=y.split("\r\n");z=z.filter(function(A){return!A.match(/^a=extmap:/)||l.some(function(B){return A.includes(B)})});return z.join("\r\n")},isVideoSupported:function x(y){return!!y&&(y.indexOf("m=video")!==-1&&y.indexOf(h)===-1||p.getFBFeatures(y).includes("video"))},setDtlsRole:function x(y,z){if(!y.match(/setup:(active|passive|actpass)/))return y.replace(/(a=fingerprint:.+)/g,"$1\r\na=setup:"+z);else return y.replace(/setup:actpass/g,"setup:"+z)},setVideoBitrateConstraint:function x(y){var z=720;if(y.match(/^b=AS:/m))return y;y=y.replace(/^a=mid:video\r\n/m,"a=mid:video\r\nb=AS:"+z+"\r\n");return y},removeSdparta:function x(y){__p&&__p();var z=y.split("\r\n"),A="audio",B=false,C=-1;for(var D=0;D<z.length;D++){var E=z[D];if(E.indexOf("m=audio")===0)A="audio";if(E.indexOf("m=video")===0){B=true;A="video"}if(E.indexOf("a=mid:sdparta_")===0)z[D]="a=mid:"+A;if(E.indexOf("a=group:BUNDLE sdparta_")===0)C=D;if(E.indexOf("a=group:BUNDLE audio sdparta_")===0)C=D;if(E.indexOf("a=group:BUNDLE audio video sdparta_")===0)c("FBLogger")("rtc_www").mustfix("content_name rewriting will not work anymore, fix sdparta_# in Firefox.")}if(C>-1)if(B)z[C]="a=group:BUNDLE audio video";else z[C]="a=group:BUNDLE audio";return z.join("\r\n")},useDTLSOverCrypto:function x(y){if(!(c("UserAgent").isBrowser("Chrome >= 57")||c("UserAgent").isBrowser("Opera >= 44")))return y;if(!/^a=fingerprint:/m.test(y))return y;return y.split("\r\n").filter(function(z){return z.indexOf("a=crypto:")!==0}).join("\r\n")},validateOfferSdp:function x(y,z){__p&&__p();var A;if(y.split(":")[0]==="LIVE"){var A=function(){__p&&__p();var B=/^m=/,C=/^m=audio/,D=/^m=video/,E=/^a=ssrc:/,F=z.split("\r\n"),G=[];for(var H=F.length-1;H>=0;H--)if(B.test(F[H]))G.push(F.splice(H));var I=false,J=false;G.forEach(function(K){if(C.test(K[0])&&!I)I=K.some(function(L){return E.test(L)});else if(D.test(K[0])&&!J)J=K.some(function(L){return E.test(L)})});return{v:I&&J}}();if(typeof A==="object")return A.v}return true},clearFirefoxInactiveDataChannelBlock:function x(y){__p&&__p();if(!c("UserAgent").isBrowser("Firefox"))return y;var z=y.split(r),A=z.findIndex(function(E){return E.startsWith("m=application")});if(A===-1)return y;var B=z.slice(A),C=B.findIndex(function(E,F){return F>0&&E.startsWith("m=")});if(C!==-1)B=B.slice(0,C);if(B[0]!=null&&B[0].endsWith("0")&&B.some(function(E){return E.startsWith("a=inactive")})){var D=B.findIndex(function(E){return E.startsWith("c=")});return[].concat(z.slice(0,A+1+(D!==-1?D:0)),z.slice(A+B.length)).join(r)}return y},addFBFeatures:s,getFBFeatures:t},q="a=x-fb-feature:",r="\r\n";function s(x){for(var y=arguments.length,z=Array(y>1?y-1:0),A=1;A<y;A++)z[A-1]=arguments[A];if(z.length<1)return x;var B=u(x),C=B[0],D=B[1],E=C.split(r),F=v(E),G=E.filter(function(I){return!I.startsWith(q)}),H=1+G.map(function(I){return I?I.substr(0,2):""}).lastIndexOf("a=")||G.length;return[].concat(G.slice(0),w([].concat(F,z)).map(function(I){return""+q+I}),G.slice(H),[D?[D.trim(),""].join(r):""]).join(r)}function t(x){var y=u(x),z=y[0];return v(z.split(r))}function u(x){__p&&__p();if(!x)return["",""];var y=x.trim().split(r),z=0;while(z<y.length){if(y[z].startsWith("m="))break;z++}if(z===y.length)return[x.trim(),""];return[y.slice(0,z).join(r).trim(),y.slice(z).join(r).trim()]}function v(x){return w(x.filter(function(y){return y.startsWith(q)}).map(function(y){return y.substr(q.length)}))}function w(x){__p&&__p();var y=Object.create(null);for(var z=x,A=Array.isArray(z),B=0,z=A?z:z[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var C;if(A){if(B>=z.length)break;C=z[B++]}else{B=z.next();if(B.done)break;C=B.value}var D=C;if(D)y[D]=true}return Object.keys(y).sort()}f.exports=p}),null);
__d("FBRTCMessage",["FBRTCConstants","FBRTCExperiment","FBRTCSdpUtils","FBRTCSupport"],(function a(b,c,d,e,f,g){__p&&__p();var h="mobile";function i(j){"use strict";__p&&__p();if(!this.$FBRTCMessage1(j))throw new Error("invalid webrtc message");this.originalMessageData=j;this.peerID=j.from;this.callID=parseInt(j.call_id,10);this.msg=JSON.parse(j.payload);if(this.msg.json_payload){this.escalationName=this.msg.sessionName;this.msg=this.msg.json_payload}this.msgType=this.msg.type;this.msgID=this.msg.msg_id;this.ackID=this.msg.ack_id;this.source=j.source;this.peerSupportsVideoInterop=!!this.msg.supports_video_interop;this.$FBRTCMessage2();this.$FBRTCMessage3();this.$FBRTCMessage4();this.$FBRTCMessage5()}i.prototype.$FBRTCMessage1=function(j){"use strict";return j.from&&j.call_id&&j.payload};i.prototype.$FBRTCMessage2=function(){"use strict";if(this.peerSupportsVideoInterop)return;if(this.isFromMobile())this.disableVideo()};i.prototype.disableVideo=function(){"use strict";if(this.msg.sdp)this.msg.sdp=c("FBRTCSdpUtils").disableVideo(this.msg.sdp);if(this.msgType===c("FBRTCConstants").PayloadType.SET_VIDEO||this.msgType===c("FBRTCConstants").PayloadType.OFFER||this.msgType===c("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===c("FBRTCConstants").PayloadType.ANSWER||this.msgType===c("FBRTCConstants").PayloadType.ICERESTART_ANSWER)this.msg.videoon=false};i.prototype.$FBRTCMessage3=function(){"use strict";if(this.isFromMobile()&&this.msg.sdp&&this.msgType!==c("FBRTCConstants").PayloadType.ICE_CANDIDATE)this.msg.sdp=c("FBRTCSdpUtils").removeFEC(this.msg.sdp)};i.prototype.$FBRTCMessage4=function(){"use strict";if(this.isFromMobile()&&c("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==c("FBRTCConstants").PayloadType.ICE_CANDIDATE){var j=c("FBRTCExperiment").gen("rtc_browser_use_h264"),k=j.getParam("allow_h264","no");if(k!=="yes")this.msg.sdp=c("FBRTCSdpUtils").removeH264(this.msg.sdp)}};i.prototype.$FBRTCMessage5=function(){"use strict";if(this.isFromMobile()&&c("FBRTCSupport").isWebrtcSupported()&&this.msg.sdp&&this.msgType!==c("FBRTCConstants").PayloadType.ICE_CANDIDATE){var j=c("FBRTCExperiment").gen("rtc_browser_use_vp9"),k=j.getParam("allow_vp9","no");if(k!=="yes")this.msg.sdp=c("FBRTCSdpUtils").removeVP9(this.msg.sdp)}};i.prototype.isOffer=function(){"use strict";return this.msgType===c("FBRTCConstants").PayloadType.OFFER};i.prototype.isFromMobile=function(){"use strict";return this.source===h};i.prototype.isRemoteVideoSupported=function(){"use strict";if(!this.msg.sdp||this.msgType===c("FBRTCConstants").PayloadType.ICE_CANDIDATE)return true;return c("FBRTCSdpUtils").isVideoSupported(this.msg.sdp)};i.prototype.isRetry=function(){"use strict";return!!this.msg.flag};i.prototype.isForCall=function(j,k){"use strict";if(this.escalationName&&(this.msgType===c("FBRTCConstants").PayloadType.HANGUP||this.msgType===c("FBRTCConstants").PayloadType.SWITCH_TO_MULTIWAY))return k===this.escalationName;return!j||j===this.callID||this.msgType===c("FBRTCConstants").PayloadType.OFFER||this.msgType===c("FBRTCConstants").PayloadType.ICERESTART_OFFER||this.msgType===c("FBRTCConstants").PayloadType.PCRESTART_OFFER||this.msgType===c("FBRTCConstants").PayloadType.ICE_CANDIDATE};i.prototype.getSignalingExperiments=function(){"use strict";if(this.isFromMobile()&&!this.msg.experiments)return["sdp_update"];return this.msg.experiments};f.exports=i}),null);
__d("FBRTCVideoEscalationStore",["FBRTCCallControlActions","FBRTCConstants","FBRTCStore","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=25e3,k=1e4,l=c("keyMirror")({direct_video:null,escalated:null,escalation_declined:null,voip:null});h=babelHelpers.inherits(m,c("FBRTCStore"));i=h&&h.prototype;function m(n,o,p){i.constructor.call(this);this.$FBRTCVideoEscalationStore7=n;this.$FBRTCVideoEscalationStore2=o;this.$FBRTCVideoEscalationStore1=p;this.$FBRTCVideoEscalationStore4=p;this.$FBRTCVideoEscalationStore3=false;this.$FBRTCVideoEscalationStore5=null;this.$FBRTCVideoEscalationStore8=null}m.prototype.isPending=function(){return!!this.$FBRTCVideoEscalationStore5};m.prototype.callHasEscalated=function(){return this.$FBRTCVideoEscalationStore1};m.prototype.getCallType=function(){if(!this.$FBRTCVideoEscalationStore2.isRemoteVideoSupported)return l.voip;else if(this.$FBRTCVideoEscalationStore4)return l.direct_video;else if(this.$FBRTCVideoEscalationStore1)return l.escalated;else if(this.$FBRTCVideoEscalationStore3)return l.escalation_declined;return l.voip};m.prototype.__onDispatch=function(n){__p&&__p();switch(n.type){case c("FBRTCCallControlActions").Types.RECEIVED_SIGNALING_MESSAGE:var o=n.message;if(n.message_type===c("FBRTCConstants").PayloadType.VIDEO_REQUEST){this.$FBRTCVideoEscalationStore3=true;if(o.ackID)this.$FBRTCVideoEscalationStore10(o);else this.$FBRTCVideoEscalationStore11(o)}if(n.message_type===c("FBRTCConstants").PayloadType.ACK&&o.msg.ack_type===c("FBRTCConstants").PayloadType.VIDEO_REQUEST)this.$FBRTCVideoEscalationStore12(o);break;case c("FBRTCCallControlActions").Types.ACCEPT_ESCALATION:this.$FBRTCVideoEscalationStore13(true);break;case c("FBRTCCallControlActions").Types.DECLINE_ESCALATION:this.$FBRTCVideoEscalationStore13(false);break;case c("FBRTCCallControlActions").Types.TOGGLE_MUTE_VIDEO:this.$FBRTCVideoEscalationStore3=true;this.getDispatcher().waitFor([this.$FBRTCVideoEscalationStore2.getDispatchToken()]);this.$FBRTCVideoEscalationStore14();break}};m.prototype.$FBRTCVideoEscalationStore12=function(n){if(this.$FBRTCVideoEscalationStore8&&this.$FBRTCVideoEscalationStore8.msg_id===n.ackID)this.$FBRTCVideoEscalationStore15()};m.prototype.$FBRTCVideoEscalationStore15=function(){clearTimeout(this.$FBRTCVideoEscalationStore6)};m.prototype.$FBRTCVideoEscalationStore16=function(){this.$FBRTCVideoEscalationStore6=setTimeout(function(){if(!this.$FBRTCVideoEscalationStore8)return;this.$FBRTCVideoEscalationStore7.resendPayload(this.$FBRTCVideoEscalationStore2.peerID,this.$FBRTCVideoEscalationStore8)}.bind(this),k)};m.prototype.$FBRTCVideoEscalationStore10=function(n){__p&&__p();if(!this.$FBRTCVideoEscalationStore8||n.ackID!==this.$FBRTCVideoEscalationStore8.msg_id)return;clearTimeout(this.$FBRTCVideoEscalationStore9);this.$FBRTCVideoEscalationStore15();var o=n.msg,p=n.peerID,q=n.callID,r=this.$FBRTCVideoEscalationStore17(o);this.$FBRTCVideoEscalationStore7.sendAck(p,q,o);this.$FBRTCVideoEscalationStore8=null;this.$FBRTCVideoEscalationStore1=r;this.$FBRTCVideoEscalationStore18(r);if(!r&&this.$FBRTCVideoEscalationStore2.localStream.hasVideo())this.$FBRTCVideoEscalationStore2.localStream.toggleMuteVideo();this.__emitChange()};m.prototype.$FBRTCVideoEscalationStore11=function(n){__p&&__p();if(this.$FBRTCVideoEscalationStore1){if(this.$FBRTCVideoEscalationStore17(n.msg)){this.$FBRTCVideoEscalationStore5=n;this.$FBRTCVideoEscalationStore13(true)}else this.$FBRTCVideoEscalationStore2.remoteStream.setVideoEnabled(false);return}var o=n.msg,p=n.peerID,q=n.callID;this.$FBRTCVideoEscalationStore7.sendAck(p,q,o);if(this.$FBRTCVideoEscalationStore17(o)){this.$FBRTCVideoEscalationStore5=n;this.$FBRTCVideoEscalationStore9=setTimeout(function(){c("FBRTCCallControlActions").declineEscalation()},j)}else this.$FBRTCVideoEscalationStore5=null;this.__emitChange()};m.prototype.$FBRTCVideoEscalationStore13=function(n){clearTimeout(this.$FBRTCVideoEscalationStore9);if(this.$FBRTCVideoEscalationStore5){var o=this.$FBRTCVideoEscalationStore5,p=o.peerID,q=o.callID,r=o.msgID;this.$FBRTCVideoEscalationStore8=this.$FBRTCVideoEscalationStore7.sendVideoRequestResponse(p,q,r,n);this.$FBRTCVideoEscalationStore16();this.$FBRTCVideoEscalationStore1=n;this.$FBRTCVideoEscalationStore5=null;this.__emitChange()}};m.prototype.$FBRTCVideoEscalationStore14=function(){__p&&__p();if(this.$FBRTCVideoEscalationStore1){this.$FBRTCVideoEscalationStore19();return}this.$FBRTCVideoEscalationStore8=this.$FBRTCVideoEscalationStore7.sendVideoEscalationRequest(this.$FBRTCVideoEscalationStore2.peerID,this.$FBRTCVideoEscalationStore2.callID,this.$FBRTCVideoEscalationStore2.localStream.hasVideo());if(this.$FBRTCVideoEscalationStore2.localStream.hasVideo()){this.$FBRTCVideoEscalationStore16();this.$FBRTCVideoEscalationStore9=setTimeout(function(){if(this.$FBRTCVideoEscalationStore2.localStream.hasVideo())c("FBRTCCallControlActions").toggleMuteVideo()}.bind(this),j)}else{this.$FBRTCVideoEscalationStore15();clearTimeout(this.$FBRTCVideoEscalationStore9);this.$FBRTCVideoEscalationStore8=null}this.__emitChange()};m.prototype.$FBRTCVideoEscalationStore19=function(){if(!this.$FBRTCVideoEscalationStore2.isRemoteVideoSupported)return;this.$FBRTCVideoEscalationStore7.sendMuteStateUpdate(this.$FBRTCVideoEscalationStore2.peerID,this.$FBRTCVideoEscalationStore2.callID,this.$FBRTCVideoEscalationStore2.localStream.hasVideo())};m.prototype.$FBRTCVideoEscalationStore18=function(n){this.$FBRTCVideoEscalationStore2.remoteStream.setVideoEnabled(n)};m.prototype.$FBRTCVideoEscalationStore17=function(n){return!!(n.reqVideoOn||n.videoon)};m.CallType=l;f.exports=m}),null);
__d("RTCP2PCallEscalationStoreState",["FBRTCMessage","FBRTCVideoEscalationStore","immutable"],(function a(b,c,d,e,f,g){var h,i,j=c("FBRTCVideoEscalationStore").CallType;h=babelHelpers.inherits(k,c("immutable").Record({awaitingACK:false,callType:j.voip,escalated:false,failureReason:null,initiatedEscalation:false,inProgress:false,request:null,response:null,token:null}));i=h&&h.prototype;function k(){"use strict";h.apply(this,arguments)}f.exports=k}),null);
__d("MessengerRTCFunnelLogger",["FunnelLogger","FBRTCConstants","RTCCallActionTypes","FBRTCCallControlActions","RTCP2PCallActionTypes","RTCP2PCallEscalationActionTypes","RTCP2PCallEscalationStoreState","URI","UserAgentData"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FBRTCConstants").SignalingProtocol,i=c("FBRTCCallControlActions").Types,j="WEB_MESSENGER_RTC_FUNNEL",k=j+"_append",l=j+"_tags",m=j+"_end",n=null;function o(z){c("FunnelLogger").startFunnel(j);q([z]);p()}function p(){var z={bn:c("UserAgentData").browserName,bv:c("UserAgentData").browserVersion,os:c("UserAgentData").platformName,dn:c("URI").getRequestURI().getDomain().split(".").slice(-2).join(".")};Object.keys(z).forEach(function(A){c("FunnelLogger").addFunnelTag(j,A+":"+(z[A]||"unknown"))})}function q(z){if(window.opener&&window.opener.postMessage&&n){window.opener.postMessage({type:l,nonce:n,tags:z},window.location.origin);return}z.forEach(function(A){c("FunnelLogger").addFunnelTag(j,A)})}function r(z,A){if(window.opener&&window.opener.postMessage&&n){window.opener.postMessage({type:j+"_append",nonce:n,action:z,actionTag:A},window.location.origin);return}if(A===undefined)c("FunnelLogger").appendActionIfNew(j,z);else c("FunnelLogger").appendActionWithTag(j,z,A)}function s(z){if(window.opener&&window.opener.postMessage&&n){window.opener.postMessage({type:j+"_end",nonce:n,action:z},window.location.origin);return}if(z)r(z);c("FunnelLogger").endFunnel(j)}function t(z){n=z}function u(z){__p&&__p();var A=function A(event){__p&&__p();if(event.origin!==window.location.origin||!event.data||event.data.nonce!==z)return;if(event.data.type===k)r(event.data.action,event.data.actionTag);else if(event.data.type===l)q(event.data.tags);else if(event.data.type===m){s(event.data.action);window.removeEventListener("message",A)}};window.addEventListener("message",A)}function v(z,A){switch(z){case i.RECEIVED_SIGNALING_MESSAGE:break;case"END_CALL":r(z,A);s();break;default:r(z,A)}}function w(z,A){__p&&__p();switch(A.type){case c("RTCCallActionTypes").ON_CONFERENCE_STATE:case c("RTCCallActionTypes").SET_CALL_SUMMARY:case c("RTCCallActionTypes").SET_DOMINANT_SPEAKER:case c("RTCCallActionTypes").ON_SERVER_MEDIA_UPDATE_SUCCESS:case c("RTCCallActionTypes").SET_GRID_VIEW:case c("RTCCallActionTypes").SET_STRIP_VIEW:case c("RTCP2PCallActionTypes").SET_REMOTE_SIGNALING_EXPERIMENTS:case c("RTCP2PCallActionTypes").SET_CALL_TYPE:case c("RTCP2PCallActionTypes").P2P_INIT_NUX_STATE:break;case c("RTCP2PCallActionTypes").P2P_PROCESS_MESSAGE:var B=[];if(A.message&&!A.message.isRemoteVideoSupported())B.push("remove_video_unsupported");if(A.message&&A.message.isFromMobile())B.push("peer_on_mobile");else B.push("peer_on_web");q(B);break;case c("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:r(A.connectionStatus);break;case c("RTCCallActionTypes").SET_END_CALL_REASON:r(A.type,A.endCallReason&&A.endCallReason.toStrName(true));setTimeout(s,1e3);break;case c("RTCCallActionTypes").INIT:if(A.protocol===h.P2P)q(["p2p","v2"]);break;case c("RTCCallActionTypes").SET_LAYOUT:r(A.type,A.layout);break;case c("RTCCallActionTypes").SET_MW_CALL_TYPE:r(A.type,A.callType);break;case c("RTCCallActionTypes").END_CALL:r(A.type,A.endCallReason);break;default:r(A.type)}return z}function x(z,A){switch(A.type){case c("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_START:case c("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SUCCESS:case c("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_FAILURE:r(A.type,"caller");break;case c("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_REQUEST:case c("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_SET_RESPONSE:case c("RTCP2PCallEscalationActionTypes").P2P_CALL_ESCALATION_ACK:r(A.type,"callee");break;default:return z}return z}var y={appendAction:r,addFunnelTags:q,endFunnel:s,startFunnel:o,setWindowNonce:t,listenCrossWindowAction:u,logRTCCallAction:w,logRTCP2PV1Action:v,logRTCCallEscalationAction:x};f.exports=y}),null);
__d("FBRTCAvailability",["ChannelConstants","PresenceStatus"],(function a(b,c,d,e,f,g){"use strict";var h={isCallable:function i(j){var k=c("PresenceStatus").getCapabilities(j),l=c("ChannelConstants").CAPABILITY_VOIP_INTEROP;return!!(k&l)}};f.exports=h}),null);
__d("FBRTCCallUIWrapper",["regeneratorRuntime","Bootloader","MessengerRTCFunnelLogger","UserAgent"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i={openGroupCallUI:function j(k,l,m,n,o,p){return c("regeneratorRuntime").async(function q(r){while(1)switch(r.prev=r.next){case 0:h=this._openWindow("Group Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(s){s.openGroupCallUI(k,l,m,n,o,h,p)},"FBRTCCallUIWrapper");case 2:case"end":return r.stop()}},null,this)},openGroupCallURI:function j(k,l,m,n,o,p){return c("regeneratorRuntime").async(function q(r){while(1)switch(r.prev=r.next){case 0:h=this._openWindow("Group Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(s){s.openGroupCallURI({conferenceName:k,callID:l,hasVideo:m,serverInfoData:n,trigger:o,callSummary:p,callWindow:h})},"FBRTCCallUIWrapper");case 2:case"end":return r.stop()}},null,this)},openAsCaller:function j(k,l,m,n){__p&&__p();if(!h&&window.rtcCallChildWindow){h=window.rtcCallChildWindow;window.rtcCallChildWindow=null}if(this._shouldFocusCallWindow(k)){h.focus();return}if(this._shouldCloseCallWindow())h.close();h=this._openWindow("Video Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(o){o.openAsCaller(k,l,m,n,h)},"FBRTCCallUIWrapper")},openAsCallee:function j(k,l,m,n,o){h=this._openWindow("Video Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(p){p.openAsCallee(k,l,m,n,o,h)},"FBRTCCallUIWrapper")},_shouldFocusCallWindow:function j(k){return h&&!h.closed&&h.rtcCallInProgessWith===k},_shouldCloseCallWindow:function j(){return h&&!h.closed&&!h.rtcCallInProgessWith},_openWindow:function j(k){var l=this._windowPosition(),m=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",l.height,l.width,l.top,l.left].join(",");if(this._isSparkBrowser())m="";var h=window.open("",k,m);window.callWindow=h;if(h)c("MessengerRTCFunnelLogger").appendAction("popup_window");else c("MessengerRTCFunnelLogger").endFunnel("popup_blocked");return h},_windowPosition:function j(){__p&&__p();var k=960,l=540,m=void 0,n=void 0,o=void 0,p=void 0;if(screen&&screen.width>1280){k=1280;l=720}if(window.innerWidth!==undefined){n=window.innerWidth;m=window.innerHeight}else{n=screen.width;m=screen.height}if(window.screenLeft!==undefined){o=window.screenLeft;p=window.screenTop}else{o=window.screenX;p=window.screenY}var q=Math.floor(n/2-k/2+o),r=Math.floor(m/2-l/2+p);return{height:"height="+l.toString(),width:"width="+k.toString(),top:"top="+r.toString(),left:"left="+q.toString()}},_isSparkBrowser:function j(){return c("UserAgent").isBrowser("Chrome < 34")&&c("UserAgent").isBrowser("Chrome > 33")}};f.exports=i}),null);
__d("FBRTCScreenSharingLogger",["Log","MarauderLogger","formatDate","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="webrtc_screen_sharing",i=c("keyMirror")({screen_sharing_action:null,screen_sharing_error:null}),j=c("keyMirror")({PEER_ID:null,SESSION_ID:null,CONTEXT_TYPE:null,CONTENT:null}),k=c("keyMirror")({SCREEN_SHARING_TOGGLED:null,SCREEN_SHARING_CANCELLED:null,SCREEN_SHARING_ENABLED:null,SCREEN_SHARING_DISABLED:null,SCREEN_SHARING_EXT_DIALOG:null,SCREEN_SHARING_EXT_LINK:null,SCREEN_SHARING_DIALOG_SUCCESS:null,SCREEN_SHARING_DIALOG_CANCEL:null}),l=null;m.getInstance=function(){if(!l)l=new m();return l};m.prototype.logAction=function(n,o,p,q){var r={};r[i.screen_sharing_action]=p;r[j.PEER_ID]=n;r[j.SESSION_ID]=o;r[j.CONTEXT_TYPE]=this.$FBRTCScreenSharingLogger1();r[j.CONTENT]=q;this.$FBRTCScreenSharingLogger2(i.screen_sharing_action,r);this.logToConsole(n,o,p)};m.prototype.logError=function(n,o,p){var q={};q[j.PEER_ID]=n;q[j.SESSION_ID]=o;q[j.CONTEXT_TYPE]=this.$FBRTCScreenSharingLogger1();q[j.CONTENT]=p;this.$FBRTCScreenSharingLogger2(i.screen_sharing_error,q);this.logToConsole(n,o,p)};m.prototype.logToConsole=function(n,o,p){};m.prototype.$FBRTCScreenSharingLogger1=function(){return"p2p_video_call"};m.prototype.$FBRTCScreenSharingLogger2=function(n,o){c("MarauderLogger").log(n,h,o)};function m(){}m.Action=k;f.exports=m}),null);
__d("FBRTCVersionDetection",["UserAgent","UserAgentData"],(function a(b,c,d,e,f,g){__p&&__p();var h={isChrome:function i(){return c("UserAgent").isBrowser("Chrome")},isFirefox:function i(){return c("UserAgent").isBrowser("Firefox")},isChromium:function i(){return!!navigator.webkitGetUserMedia},webrtcVersion:function i(){if(this.isFirefox()||this.isChrome())return c("UserAgentData").browserVersion;if(this.isChromium()){var j=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return j!=null?parseInt(j[2],10):999}return 0}};f.exports=h}),null);
__d("FBRTCScreenSharingUtils",["Promise","FBRTCScreenSharingLogger","FBRTCStruct","FBRTCVersionDetection","RTCConfig","FBRTCSupport"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("FBRTCStruct"))(["UNKNOWN","INSTALLED"]),i=h.UNKNOWN,j={RECIPIENT:"SC_CONTENT_SCRIPT",isScreenSharingSupported:function k(){return c("RTCConfig").ScreenSharingGK},isGroupCallScreenSharingSupported:function k(){return c("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function k(){return c("FBRTCVersionDetection").isChrome()&&c("FBRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function k(){return c("FBRTCSupport").isOSSupported()&&c("FBRTCVersionDetection").isChromium()&&c("FBRTCVersionDetection").webrtcVersion()>=34},canPeerReceiveScreenSharing:function k(l){return l.remoteSupport("screen_sharing")||c("RTCConfig").ScreenSharingToMobileGK&&!l.remoteSupport("www")&&!l.remoteSupport("mweb")},isExtensionInstalled:function k(){return i===h.INSTALLED},getExtensionStatus:function k(){return i},checkExtensionInstalled:function k(){__p&&__p();if(this.isExtensionInstalled())return c("Promise").resolve();var l=void 0,m=new(c("Promise"))(function(n){__p&&__p();l=function o(p){var q=p.origin,r=p.data;if(q!=window.location.origin||!r.type)return;if(r.type==="SC_EXT_INSTALLED"){window.removeEventListener("message",l);i=h.INSTALLED;n()}};window.addEventListener("message",l)});return c("Promise").race([m,this._pokeExtension()])["catch"](function(n){window.removeEventListener("message",l);return c("Promise").reject(n)})},_pokeExtension:function k(){__p&&__p();var l=arguments.length<=0||arguments[0]===undefined?13:arguments[0];return new(c("Promise"))(function(m,n){var o=setInterval(function(){setTimeout(function(){if(i===h.UNKNOWN)window.postMessage({recipient:j.RECIPIENT,type:"SC_IS_EXT_INSTALLED",text:"is extension installed"},"*")});if(l>0)l--;else{clearInterval(o);n("extension unavailable")}},200)})},logFailedAttempt:function k(l,m){c("FBRTCScreenSharingLogger").getInstance().logAction(l,m,c("FBRTCScreenSharingLogger").Action.SCREEN_SHARING_TOGGLED,"feature not available")}};f.exports=j}),null);
__d("RTCSignalingExperiments",["FBRTCScreenSharingUtils","FBRTCSupport","FBRTCVersionDetection","UserAgent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(j){this.$RTCSignalingExperiments2=new Set();this.$RTCSignalingExperiments1=new Set(h.getLocal());if(j)this.$RTCSignalingExperiments2=new Set(j)}h.prototype.getLocal=function(){return Array.from(this.$RTCSignalingExperiments1)};h.prototype.setRemote=function(j){if(!j)return this;return new h(j)};h.prototype.getRemote=function(){return Array.from(this.$RTCSignalingExperiments2)};h.prototype.support=function(j){return this.localSupport(j)&&this.remoteSupport(j)};h.prototype.localSupport=function(j){return this.$RTCSignalingExperiments1.has(j)};h.prototype.remoteSupport=function(j){return this.$RTCSignalingExperiments2.has(j)};h.getLocal=function(){__p&&__p();var j=[];if(c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera")||c("UserAgent").isBrowser("Firefox >= 38"))j.push("sdp_update");if(i())j.push("multiple_streams_plan_b");if(c("FBRTCScreenSharingUtils").canUserReceiveScreenSharing())j.push("screen_sharing");if(c("FBRTCSupport").isOSSupported())j.push("www");else j.push("mweb");return j};function i(){return(c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera"))&&c("FBRTCVersionDetection").webrtcVersion()>=34}f.exports=h}),null);
__d("FBRTCConfig",["CurrentUser","RTCSignalingExperiments"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=false,j=0,k={},l={setConfig:function m(n,o,p,q,r){k=n;j=o;h=q;i=r},isVCEndpointCall:function m(){return h},canPeerUseV2:function m(){return i},getPeerID:function m(){return j},statsInterpreterConfig:function m(){return{rtt_weight:2,frr_weight:800,plr_weight:500,score_threshold:1e3,bad_score_count:3}},settingsEnabled:function m(){return k.enable_settings},shouldAutoDisableVideo:function m(){return false},unsupportedBrowserUrl:function m(){if(k.troubleshooting_urls&&k.troubleshooting_urls.unsupported_browser)return k.troubleshooting_urls.unsupported_browser;if(c("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/919532078125908";else return"https://www.facebook.com/help/211644178877843"},userMediaErrorUrl:function m(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_error)return k.troubleshooting_urls.user_media_error;if(c("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},userMediaPermissionErrorUrl:function m(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_permission_error)return k.troubleshooting_urls.user_media_permission_error;if(c("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},supportedSignalingExperiments:function m(){return c("RTCSignalingExperiments").getLocal()},isMessengerDotCom:function m(){return k.is_messenger_dot_com},useMessengerCallUI:function m(){return k.messenger_call_ui},shouldCreateDataChannel:function m(){return k.data_channel},disableURLManager:function m(){return k.disable_url_manager}};f.exports=l}),null);
__d("FBRTCUtils",["AsyncRequest","CollabCallTriggerType","CurrentUser","FBIDCheck","FBRTCConfig","FBRTCConstants","RTCConfig","emptyFunction","randomInt"],(function a(b,c,d,e,f,g){__p&&__p();var h=6e3,i=window.URL||window.webkitURL,j="setSinkId"in window.HTMLMediaElement.prototype,k="srcObject"in window.HTMLMediaElement.prototype,l="mozSrcObject"in window.HTMLMediaElement.prototype,m={attachMediaStream:function n(o,p){__p&&__p();if(o==null)return;if(k){o.srcObject=p;if(p)o.play();return}if(l){o.mozSrcObject=p;if(p)o.play();return}if(o.src)i.revokeObjectURL(o.src);o.src=p?i.createObjectURL(p):""},reattachMediaStream:function n(o,p){__p&&__p();if(k){o.srcObject=p.srcObject;o.play();return}if(l){o.mozSrcObject=p.mozSrcObject;o.play();return}o.src=p.src},generateRandomInt:function n(){return c("randomInt")(0,4294967294)+1},aboutEqual:function n(o,p){return o-p<.01&&p-o<.01},getUploadLogLevel:function n(o){return Math.max(this.getLocalUploadLogLevel(),o)},getLocalUploadLogLevel:function n(){return c("CurrentUser").isEmployee()?c("FBRTCConstants").UploadLogLevel.LL_DEBUG:c("FBRTCConstants").UploadLogLevel.LL_NONE},sendServerRequest:function n(o){var p=arguments.length<=1||arguments[1]===undefined?c("emptyFunction"):arguments[1],q=arguments.length<=2||arguments[2]===undefined?c("emptyFunction"):arguments[2],r=arguments.length<=3||arguments[3]===undefined?false:arguments[3],s=arguments.length<=4||arguments[4]===undefined?h:arguments[4],t=arguments.length<=5||arguments[5]===undefined?{}:arguments[5],u=new(c("AsyncRequest"))().setURI(o).setData(t).setAllowCrossPageTransition(true).setHandler(p).setErrorHandler(q).setTimeoutHandler(s,function(){q()});if(r)u.setOption("asynchronous_DEPRECATED",false);u.send()},supportsSetSink:function n(){return j},isPeerVCEndpoint:function n(o){var p=c("FBRTCConfig").isVCEndpointCall();return p!==undefined?p:!!o&&!c("FBIDCheck").isUser_deprecated(o)&&c("RTCConfig").CollabVCEndpointsVideoCallGK},isCollabTrigger:function n(o){return o===c("CollabCallTriggerType").QUICK_DIAL||o===c("CollabCallTriggerType").MEETING_ROOM_PAGE_PROFILE}};f.exports=m}),null);
__d("FBRTCCore",["invariant","Bootloader","FBRTCAvailability","FBRTCCallUIWrapper","FBRTCSupport","FBRTCUtils","MessengerRTCFunnelLogger"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=false,j={startOutgoingCall:function k(l,m,n){__p&&__p();var o=arguments.length<=3||arguments[3]===undefined?false:arguments[3];!/\D/.test(l)||h(0);if(i)return;c("MessengerRTCFunnelLogger").addFunnelTags([n?"audio_only":"video","p2p"]);i=true;setTimeout(function(){i=false},1e3);if(o&&!c("FBRTCSupport").isCollabSupported())c("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage","CollabMessengerLogger"],function(q,r){q.showForUnsupportedCollabCall();r.logBrowserNotSupported({peerID:l});c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");else if(!c("FBRTCSupport").isWebrtcSupported())c("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage"],function(q){q.showForOutgoingCall();c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");else{var p=c("FBRTCUtils").generateRandomInt();c("FBRTCCallUIWrapper").openAsCaller(l,p,m,n)}},startGroupCall:function k(l){__p&&__p();var m=l.conferenceName,n=l.hasVideo,o=l.serverInfoData,p=l.trigger,q=l.usersToRing,r=q===undefined?[]:q;if(i)return;c("MessengerRTCFunnelLogger").addFunnelTags([n?"video":"audio_only","group"]);i=true;setTimeout(function(){i=false},1e3);if(!c("FBRTCSupport").isGroupCallWebtrcSupported()){c("Bootloader").loadModules(["MessengerRTCUnsupportedBrowserDialogController"],function(s){s.render({hasVideo:n,isGroupCall:true});c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");return}c("FBRTCCallUIWrapper").openGroupCallUI(m,c("FBRTCUtils").generateRandomInt(),r,n,p,o)},isAvailableForWebrtcCalling:function k(l){return c("FBRTCAvailability").isCallable(l)},shouldEnableVideoCalling:function k(){return c("FBRTCSupport").isOSSupported()}};f.exports=j}),null);
__d("FBRTCCallabilityActions",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function i(j){this.$FBRTCCallabilityActions1=j}i.prototype.callabilityFetched=function(j,k){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCHED,userID:j,callability:k})};i.prototype.callabilityFetchError=function(j){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCH_ERROR,userID:j})};i.Types=h;f.exports=i}),null);
__d("XRTCCallabilityController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:true}})}),null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","TimeSlice","XRTCCallabilityController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$FBRTCCallabilityDataManager1=new(c("FBRTCCallabilityActions"))(i)}h.prototype.fetchCallability=function(i){c("TimeSlice").guard(function(){var j=c("XRTCCallabilityController").getURIBuilder().setFBID("user_id",i).getURI(),k=this.$FBRTCCallabilityDataManager2.bind(this,i),l=this.$FBRTCCallabilityDataManager3.bind(this,i);new(c("AsyncRequest"))().setURI(j).setHandler(k).setErrorHandler(l).setAllowCrossPageTransition(true).send()}.bind(this),"Chat Tab RTC Callability Check",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()};h.prototype.$FBRTCCallabilityDataManager2=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetched(i,j.payload)};h.prototype.$FBRTCCallabilityDataManager3=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetchError(i)};f.exports=h}),null);
__d("MessengerThreadCannotReplyReason",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BLOCKED:"blocked",COMPOSER_DISABLED_BOT:"composer_disabled_bot",HAS_EMAIL_PARTICIPANT:"has_email_participant",OBJECT_ORIGINATED:"object_originated",READ_ONLY:"read_only",VIEWER_NOT_SUBSCRIBED:"viewer_not_subscribed",RECIPIENTS_NOT_LOADABLE:"recipients_not_loadable",RECIPIENTS_UNAVAILABLE:"recipients_unavailable",RECIPIENTS_INVALID:"recipients_invalid",RECIPIENTS_INACTIVE_WORK_ACC:"recipients_inactive_work_account",MONTAGE_NOT_AUTHOR:"montage_not_author"})}),null);
__d("MercuryThreadInfo",["MercuryIDs","MessengerThreadCannotReplyReason"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={canReply:function j(k){return!!(k.is_subscribed&&(k.can_reply===undefined||k.can_reply)&&!k.has_email_participant&&!k.read_only)},getMuteSetting:function j(k){return!k.mute_until?undefined:k.mute_until},isEmptyLocalThread:function j(k){return c("MercuryIDs").tokenize(k.thread_id).type==="root"&&!k.timestamp},isMuted:function j(k){return h.getMuteSetting(k)!==undefined},areMentionsMuted:function j(k){return k.mentions_mute_mode===1},areReactionsMuted:function j(k){return k.reactions_mute_mode===1},isNewEmptyLocalThread:function j(k){return!!(h.isEmptyLocalThread(k)&&k.participants&&k.participants.length===0)},showComposer:function j(k){return!!(k.is_subscribed&&(k.can_reply||!k.cannot_reply_reason||k.cannot_reply_reason===c("MessengerThreadCannotReplyReason").BLOCKED)&&!k.has_email_participant&&!k.read_only)},isColdOpen:function j(k){return!!(k.is_canonical_user&&(k.message_count===0||!k.timestamp))}};function i(j){return j+"@facebook.com"}f.exports=h}),null);
__d("RTCCallabilityStore",["fbt","Cache","FBRTCCallabilityActions","FBRTCCallabilityDataManager","FluxStore","MercuryThreadInfo","RTCConfig"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=.5,l=5;i=babelHelpers.inherits(m,c("FluxStore"));j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.__moduleID=f.id;this.$RTCCallabilityStore2=new(c("FBRTCCallabilityDataManager"))(n);this.$RTCCallabilityStore1=new(c("Cache"))()}m.prototype.__onDispatch=function(n){var o=n.type;switch(o){case c("FBRTCCallabilityActions").Types.CALLABILITY_FETCHED:var p=n.userID,q=n.callability;this.$RTCCallabilityStore1.set(p,{callable:q.is_callable,isBlocked:q.is_blocked},null,q.is_callable?l:k);this.__emitChange();break;case c("FBRTCCallabilityActions").Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(n.userID,{callable:false,isBlocked:false},null,k);this.__emitChange();break}};m.prototype.isCallable=function(n,o){var p=o?o.message_count>0&&o.folder==="inbox":false,q=this.fetchUserFromCache(n);return q&&q.callable||p};m.prototype.isBlocked=function(n,o){var p=o?c("MercuryThreadInfo").canReply(o):true,q=this.fetchUserFromCache(n);return q&&q.isBlocked||!p};m.prototype.fetchUserFromCache=function(n){if(!this.$RTCCallabilityStore1.has(n)){this.$RTCCallabilityStore2.fetchCallability(n);this.$RTCCallabilityStore1.set(n,{callable:false,isBlocked:false},null,k)}return this.$RTCCallabilityStore1.get(n)};m.prototype.callButtonTooltip=function(n,o){var p=arguments.length<=2||arguments[2]===undefined?true:arguments[2],q=arguments[3];if(!this.isBlocked(n,q)&&(p||this.isCallable(n)))return h._("Start a video chat with {shortname}",[h._param("shortname",o)]);return h._("{shortname} is currently unavailable for video calling",[h._param("shortname",o)])};m.prototype.voiceCallButtonTooltip=function(n,o){var p=arguments.length<=2||arguments[2]===undefined?true:arguments[2],q=arguments[3];if(!this.isBlocked(n,q)&&(p||this.isCallable(n)))return h._("Start a voice call with {shortname}",[h._param("shortname",o)]);return h._("{shortname} is currently unavailable for voice calling",[h._param("shortname",o)])};f.exports=m}),null);
__d("FBRTCCallabilityStore",["FBRTCDispatcher","RTCCallabilityStore"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("RTCCallabilityStore"))(c("FBRTCDispatcher"))}),null);
__d("MercuryFolders",["MercuryFoldersConfig","MessagingTag"],(function a(b,c,d,e,f,g){__p&&__p();var h=[c("MessagingTag").INBOX,c("MessagingTag").PENDING,c("MessagingTag").OTHER,c("MessagingTag").ACTION_ARCHIVED],i={getSupportedFolders:function j(){return h.filter(function(k){if(k===c("MessagingTag").PENDING)return!c("MercuryFoldersConfig").hide_message_filtered;else if(k===c("MessagingTag").OTHER)return!c("MercuryFoldersConfig").hide_message_requests;return true}).concat()},getFromMeta:function j(k){var l=k.folder;if(k.is_archived)l=c("MessagingTag").ACTION_ARCHIVED;return l}};f.exports=i}),null);
__d("MercuryUnreadState",["invariant","MercuryFolders","LogHistory","KeyedCallbackManager","MercuryActionType","MercuryConfig","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=(c("MercuryFolders").getSupportedFolders()||[]).filter(function(p){return p!==c("MessagingTag").ACTION_ARCHIVED}),j="unread_thread_hash",k="unseen_thread_list",l=c("MercuryThreadlistConstants").MAX_UNREAD_COUNT,m=c("LogHistory").getInstance("mercury_unread_state");n.getForFBID=function(p){return o.getForFBID(p)};n.get=function(){return o.get()};function n(p){__p&&__p();this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c("MercuryServerRequests").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c("MercuryThreadIDMap").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c("MercuryThreadInformer").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c("MercuryThreads").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c("MercuryDispatcher").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new(c("KeyedCallbackManager"))()}.bind(this));this.$MercuryUnreadState6.subscribe("update-unread",this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe("update-thread-ids",function(q,r){this.$MercuryUnreadState13(r)}.bind(this))}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error("unguarded_unread_count_fetch","{}");return 0}return this.$MercuryUnreadState14(p)};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);if(c("MercuryConfig").MessengerInboxRequests&&p===c("MessagingTag").INBOX&&this.$MercuryUnreadState14(c("MessagingTag").PENDING)>0)this.$MercuryUnreadState2.markFolderAsRead(c("MessagingTag").PENDING)};n.prototype.getIsThreadUnread=function(p,q){var r=q||c("MessagingTag").INBOX,s=this.$MercuryUnreadState15(r);return!!(s&&s[p])};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q))};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p)};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j)};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q)return q.length;else return this.$MercuryUnreadState9[p]};n.prototype.$MercuryUnreadState12=function(p,q){__p&&__p();var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){__p&&__p();r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c("createObjectFrom")(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState()}.bind(this));(q.message_counts||[]).forEach(function(s){__p&&__p();if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c("MercuryGlobalActionType").MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp)}.bind(this));(q.actions||[]).forEach(function(s){__p&&__p();var t=c("MercuryActionType"),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD)i.forEach(function(x){this.$MercuryUnreadState21(x,v)}.bind(this));else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c("MercuryFolders").getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v)}.bind(this))}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS)if(s.mark_as_read)this.$MercuryUnreadState21(r,v,s.timestamp);else this.$MercuryUnreadState22(r,v,s.timestamp);else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp)}}.bind(this))};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState21=function(p,q,r){__p&&__p();if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){__p&&__p();if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r}var u=s[q];if(r&&typeof u=="number"&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState()};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3)};n.prototype.$MercuryUnreadState13=function(p){__p&&__p();i.forEach(function(q){__p&&__p();var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s]}}this.$MercuryUnreadState16(q,r)}.bind(this))};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c("MercuryFolders").getFromMeta(q):p.folder?p.folder:""};n.prototype.$MercuryUnreadState18=function(p){return!!p&&i.includes(p)};var o=new(c("MercurySingletonProvider"))(n);f.exports=n}),null);
__d("SoundPlayer",["URI","createArrayFromMixed"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new Map();function i(l){var m=new(c("URI"))(l);return m.getDomain()?l:new(c("URI"))(window.location.href).setPath(m.getPath()).toString()}function j(l){var m=new(c("URI"))(l).getPath();if(/\.mp3$/.test(m))return"audio/mpeg";if(/\.og[ga]$/.test(m))return"audio/ogg";return""}var k={preload:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(h.has(r))return;var s=document.createElement("audio");if(!s||!s.canPlayType||!s.canPlayType(j(r)))continue;s.preload="auto";s.src=i(r);document.body&&document.body.appendChild(s);h.set(r,s);return}},play:function l(m){__p&&__p();var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var o=c("createArrayFromMixed")(m),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!h.has(s))k.preload(s);var t=h.get(s);if(!t)continue;if(n.loop)t.setAttribute("loop","");if(n.volume)t.volume=n.volume;t.play();return}},pause:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();return}}},stop:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();s.removeAttribute("src");s.src=i(r);return}}}};f.exports=k}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function a(b,c,d,e,f,g){__p&&__p();var h="fb_sounds_playing3";function i(){__p&&__p();var m=c("WebStorage").getLocalStorage();if(m)try{var n=m[h];if(n){n=JSON.parse(n);if(Array.isArray(n))return n}}catch(o){}return[]}function j(m){var n=c("WebStorage").getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o)}catch(p){}}}function k(m){return i().some(function(n){return n===m})}var l={play:function m(n,o,p){n=c("createArrayFromMixed")(n);o=o||n[0]+Math.floor(Date.now()/1e3);if(k(o))return;c("SoundPlayer").play(n,{loop:!!p});j(o)},isSupported:function m(){return!!c("WebStorage").getLocalStorage()}};f.exports=l}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("SoundSynchronizer").play(j,k,l)}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:"SoundRPC",data:{paths:l,sync:m,loop:n}};k.postMessage(c("FBJSON").stringify(o),"*")},supportsRPC:function j(){return!!window.postMessage},_listen:function j(){c("Event").listen(window,"message",function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c("FBJSON").parse(k.data)}catch(m){}if(l.name==="SoundRPC")h(l.data.paths,l.data.sync,l.data.loop)})}};f.exports=i}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h)c("SoundRPC").playRemote(h.contentWindow,o,p,false);else c("SoundRPC").playLocal(o,p,q);i=true},hasPlayedSoundBefore:function n(){return i},playOnlyIfImmediate:function n(o,p,q){if(!i&&c("Visibility").isHidden())return;this.play(o,p,q)},stop:function n(o){if(!h)c("SoundPlayer").stop(o)}},k=new(c("URI"))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=="www")k.setSubdomain("www");var l=k.getDomain();function m(){if(c("UserAgent_DEPRECATED").ie()<9)return false;if(c("SoundInitialData").RPC_DISABLED)return false;return c("SoundSynchronizer").isSupported()&&c("SoundRPC").supportsRPC()}if(c("isFacebookURI")(k)&&location.host!==l&&m()){h=document.createElement("iframe");h.setAttribute("src","//"+l+"/sound_iframe.php");h.style.display="none";document.body.appendChild(h)}f.exports=j}),null);
__d("MessagingThreadType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5})}),null);