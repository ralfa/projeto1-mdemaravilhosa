if (self.CavalryLogger) { CavalryLogger.start_js(["gmQVY"]); }

__d("ChannelConnection",["Arbiter","ChannelConstants","ChannelManager","JSLogger","Run","SystemEvents","Visibility","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("JSLogger").create("channel_connection"),i=null,j=null,k=null,l=null,m=0;c("ChannelManager").startChannelManager();var n=Object.assign(new(c("Arbiter"))(),{CONNECTED:"chat-connection/connected",RECONNECTING:"chat-connection/reconnecting",SHUTDOWN:"chat-connection/shutdown",MUTE_WARNING:"chat-connection/mute",UNMUTE_WARNING:"chat-connection/unmute"});c("Run").onBeforeUnload(function(){});function o(){if(j){clearTimeout(j);j=null}}function p(){o();h.log("unmute_warning");n.inform(n.UNMUTE_WARNING)}function q(v){o();j=c("setTimeoutAcrossTransitions")(p,v);h.log("mute_warning",{time:v});n.inform(n.MUTE_WARNING)}function r(){if(k){clearTimeout(k);k=null}}function s(v,w){__p&&__p();r();if(v===c("ChannelConstants").ON_ENTER_STATE&&(w.nextState||w.state)==="pull"){if(l!==n.CONNECTED){h.log("connected");var x=!l;l=n.CONNECTED;m=0;n.inform(n.CONNECTED,{init:x})}}else if(v===c("ChannelConstants").ON_ENTER_STATE&&((w.nextState||w.state)==="ping"||!w.nextState&&w.state==="idle"))k=c("setTimeoutAcrossTransitions")(function(){__p&&__p();var y=null;if(!(w.state==="idle"&&!w.nextState))y=w.delay||0;h.log("reconnecting",{delay:y});if(n.disconnected())h.log("reconnecting_ui",{delay:y});l=n.RECONNECTING;w.state==="idle"&&m++;if(m>1)n.inform(n.RECONNECTING,y);else if(!w.nextState&&w.state==="idle")s(v,w)},500);else if(v===c("ChannelConstants").ON_SHUTDOWN){h.log("shutdown",{reason:w.reason});l=n.SHUTDOWN;m=0;n.inform(n.SHUTDOWN,w.reason)}}function t(){if(c("ChannelManager").isShutdown())s(c("ChannelConstants").ON_SHUTDOWN,c("ChannelManager")._shutdownHint);else s(c("ChannelConstants").ON_ENTER_STATE,{state:c("ChannelManager").state,nextState:c("ChannelManager").nextState,delay:0});c("Visibility").addListener(c("Visibility").VISIBLE,n.reconnect)}c("Run").onAfterLoad(t);Object.assign(n,{disconnected:function v(){return l===n.SHUTDOWN||l===n.RECONNECTING&&!j&&m>1},isShutdown:function v(){return l===n.SHUTDOWN},reconnect:function v(w){__p&&__p();if(c("ChannelManager").state==="ping"||c("ChannelManager").state==="pull"||c("ChannelManager").isShutdown())return;h.log("reconnect",{now:w});n.inform(n.RECONNECTING,0);if(!!w){if(i!==null){clearTimeout(i);i=null}c("ChannelManager").enterState("ping!")}else if(!i)i=c("setTimeoutAcrossTransitions")(function(){c("ChannelManager").enterState("ping!");i=null},c("ChannelConstants").CHANNEL_MANUAL_RECONNECT_DEFER_MSEC);c("ChannelManager").resetDelay()},unmuteWarning:p});function u(){c("Arbiter").subscribe([c("ChannelConstants").ON_ENTER_STATE,c("ChannelConstants").ON_SHUTDOWN],s);c("Arbiter").subscribe(c("ChannelConstants").ATTEMPT_RECONNECT,function(){if(n.disconnected())n.reconnect()});c("SystemEvents").subscribe(c("SystemEvents").TIME_TRAVEL,function(){n.reconnect();q(c("ChannelConstants").MUTE_WARNING_TIME_MSEC)});c("Run").onBeforeUnload(r,false)}c("Run").onAfterLoad(u);n.mockAfterLoad=function(){t();u()};c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(v,w){w.channel_connected=!n.disconnected()});f.exports=n}),3);
__d("isInFocusMode",["WorkFocusModeController"],(function a(b,c,d,e,f,g){var h=c("WorkFocusModeController").WorkFocusMode,i=function i(j){return!!(h&&h.currentViewerInFocusMode(j))};f.exports=i}),null);
__d("ChatUnreadCount",["ChatConfig","ChatDispatcher","ChatUnreadCountActionTypes","MercuryIDs","MercurySingletonProvider","MercuryThreadInformer","MercuryThreads","MercuryUnreadState","isInFocusMode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c("MercuryThreadInformer").getForFBID(j);this.$ChatUnreadCount3=c("MercuryThreads").getForFBID(j);this.$ChatUnreadCount4=new Map();this.$ChatUnreadCount5=c("MercuryUnreadState").getForFBID(j);this.setupSubscriptions()}h.prototype.getUnreadCountForUID=function(j){__p&&__p();if(!j)return null;var k=c("MercuryIDs").getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)&&!c("ChatConfig").get("unread_count_fix")){this.$ChatUnreadCount4["delete"](j);return 0}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;if(!m&&c("ChatConfig").get("unread_count_fix"))this.$ChatUnreadCount4["delete"](j);else this.$ChatUnreadCount4.set(j,m);if(c("isInFocusMode")(k))return 0;return m};h.prototype.setupSubscriptions=function(){__p&&__p();this.$ChatUnreadCount2.subscribe("threads-updated",function(j,k){var l=Object.keys(k).some(function(m){var n=c("MercuryIDs").getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p}.bind(this));if(l)c("ChatDispatcher").dispatch({type:c("ChatUnreadCountActionTypes").COUNT_UPDATED})}.bind(this));this.$ChatUnreadCount2.subscribe("unread-updated",function(){return c("ChatDispatcher").dispatch({type:c("ChatUnreadCountActionTypes").COUNT_UPDATED})})};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("XPymkFunnelLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pymk/funnel_logging/",{event_ts:{type:"Int",required:true},query_id:{type:"Int"},candidate_id:{type:"Int"},signature:{type:"Int"},loc:{type:"String",required:true},ref:{type:"String"},action:{type:"Enum",required:true,enumType:1}})}),null);
__d("PymkFunnelLogger",["AsyncRequest","DOMQuery","XPymkFunnelLoggingController"],(function a(b,c,d,e,f,g){__p&&__p();var h={setupListeners:function i(j,k,l,m,n){this._setupForSingleElement(j,k,l,"add");this._setupForSingleElement(j,k,m,"click");this._setupForSingleElement(j,k,n,"click")},logImpression:function i(j,k,l){this._logEvent(j,"impression",k,l)},logXOut:function i(j,k,l){this._logEvent(j,"hide",k,l)},_logEvent:function i(j,event,k,l){var m=c("XPymkFunnelLoggingController").getURIBuilder().setInt("candidate_id",j).setInt("signature",k).setInt("event_ts",Math.floor(Date.now()/1e3)).setEnum("action",event).setString("loc",l).getURI();new(c("AsyncRequest"))(m).setMethod("POST").send()},_setupForSingleElement:function i(j,k,l,m){Event.listen(l,"click",function(event){var n=j.getAttribute("data-signature"),o=c("DOMQuery").find(j,"input.friendBrowserID"),p=parseInt(o.value,10);this._logEvent(p,m,n,k)}.bind(this))}};f.exports=h}),null);
__d("XFriendRequestIHEventLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/requests/interaction_history_logging/",{target_id:{type:"FBID",required:true},log_event:{type:"String",required:true}})}),null);
__d("FriendRequestIHEventLogger",["Event","AsyncRequest","XFriendRequestIHEventLoggingController"],(function a(b,c,d,e,f,g){__p&&__p();var h={setupJewelListeners:function i(j,k,l){this._setupForJewelSingleElement(j,k,"click");if(l)this._setupForJewelSingleElement(j,l,"click")},logImpression:function i(j){this._logEvent(j,"impression")},_logEvent:function i(j,event){if(isNaN(j))return;var k=c("XFriendRequestIHEventLoggingController").getURIBuilder().setFBID("target_id",j).setString("log_event",event).getURI();new(c("AsyncRequest"))(k).setMethod("POST").send()},_setupForJewelSingleElement:function i(j,k,l){c("Event").listen(k,"click",function(event){var m=j.getAttribute("id");if(!m)return;var n=m.substring(0,m.length-6);this._logEvent(n,l)}.bind(this))}};f.exports=h}),null);
__d("QPEventHandling",[],(function a(b,c,d,e,f,g){"use strict";var h={registerClickListener:function i(j,k,l){j.addEventListener("click",l)}};f.exports=h}),null);
__d("QPRenderer",["csx","CSS","FBLogger","Parent","QPEventHandling","XAsyncRequest","XQuickPromotionSimpleLoggingController","ge"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(o,event,p){var q=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",o).setString("qp_event",event).setStringToStringMap("qp_instance_log_data",p).getURI();new(c("XAsyncRequest"))(q).send()}function j(o,p,q){var r=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",o).setEnum("qp_action",p).setStringToStringMap("qp_instance_log_data",q).getURI();new(c("XAsyncRequest"))(r).send()}function k(o,p,q,r,s,t){var u=c("ge")(r);if(u!==null)n(o,q,u,t,function(){if(s)c("CSS").hide(p)});else c("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",o,q)}function l(o,p,q,r,s){n(o,p,q,s,function(){if(r){var t=c("Parent").bySelector(q,"._5jmm");if(t instanceof HTMLElement)c("CSS").hide(t)}})}function m(o,p,q){__p&&__p();p.show();i(o,"view",{});p.subscribe("cancel",function(){i(o,"dialog_cancel",{})});for(var r=0;r<q.length;r++){var s=q[r],t=c("ge")(s.element_id);if(t!==null){n(o,s.action,t,s.extra_log_data,s.should_close?function(){p.hide()}:function(){});if(s.action=="primary")t.focus()}else c("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",o,s.action)}}function n(o,p,q,r,s){c("QPEventHandling").registerClickListener(q,p,function(){var t=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",o).setEnum("qp_action",p).setStringToStringMap("qp_instance_log_data",r).getURI();new(c("XAsyncRequest"))(t).send();s()})}g.setAction=k;g.setComponentActionForFeedUnitQP=l;g.setDialogActionsAndShow=m;g.logAction=j;g.logEvent=i}),null);
__d("JewelQPLogging",["QPRenderer"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=null,j=false;function k(){if(j)return;if(h&&i){j=true;c("QPRenderer").logEvent(String(i.promotion_id),"view",i.instance_log_data?i.instance_log_data:{})}}var l={onJewelOpened:function m(){h=true;k()},updateQPLogData:function m(n){i=n;k()}};f.exports=l}),null);
__d("RequestsJewelStore",["Arbiter","ArbiterMixin","ChannelConstants"],(function a(b,c,d,e,f,g){__p&&__p();var h=babelHelpers["extends"]({},c("ArbiterMixin"),{_initialized:false,_count:0,_requestList:{},addFriendRequests:function i(j){Object.assign(this._requestList,j)},getRequestListKeys:function i(){return Object.keys(this._requestList)},removeRequest:function i(j){delete this._requestList[j]},getRequestCount:function i(j){return this.getRequestListKeys().length},decrementCount:function i(){this.setCount(Math.max(0,this._count-1))},setCount:function i(j){c("Arbiter").inform("jewel/count-updated",{jewel:"requests",count:j},c("Arbiter").BEHAVIOR_STATE)},setupListeners:function i(){__p&&__p();if(this._initialized)return;this._initialized=true;c("Arbiter").subscribe("jewel/count-updated",function(j,k){k.jewel==="requests"&&this._updateCount(k.count)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_requests_add"),function(j,k){return this._addRequest(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_friending_notifs"),function(j,k){return this._addNotification(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_requests_remove_old"),function(j,k){return this._removeOldRequest(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("friend_requests_seen"),function(j,k){return this.setCount(0)}.bind(this))},_updateCount:function i(j){var k=this._count!==j;this._count=j;if(k)this.inform("countUpdated",j)},_addRequest:function i(j){if(!j)return;var k=j.obj,l=k.from,m=k.suggester,n=this._requestList[l];if(!n)this.setCount(this._count+1);var o=n?n.type:null,p=o===19&&!m;this.inform("addRequest",{shouldReplace:p,previousType:o})},_addNotification:function i(j){if(!j||j.obj.notif_type!=="friend_confirmed")return;this.inform("addNotification")},_removeOldRequest:function i(j){if(!j)return;var k=this._requestList[j.obj.from];if(!k)return;this.inform("removeOldRequest",k)}});f.exports=h}),null);
__d("XWebGigaboxxUpdateSeenTimeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/gigaboxx/endpoint/update_last_seen_time/",{folder:{type:"String",required:true}})}),null);
__d("RequestsJewelController",["invariant","Promise","Arbiter","AsyncRequest","AsyncSignal","CSS","DOM","DOMQuery","Event","EventProfiler","FriendRequestIHEventLogger","JewelQPLogging","MarauderLogger","Parent","PymkFunnelLogger","RequestsJewelStore","ScrollableArea","XUIBadge","XWebGigaboxxUpdateSeenTimeAsyncController","ge","getElementPosition","getViewportDimensions","requireWeak","throttle","TimeSlice"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=null;c("requireWeak")("FriendBrowserCheckboxController",function(o){return i=o});var j=31,k=600,l=30,m=160;n.getInstance=function(){"use strict";return this.$RequestsJewelController13};n.updateFromDOM=function(){"use strict";var o=this.getInstance();if(o)o.fromDom()};n.setupScroll=function(){"use strict";var o=this.getInstance();if(o)o.setupScroll()};n.setInitialHeight=function(){"use strict";var o=this.getInstance();if(o)o.updateHeight()};n.maybeLoadJewel=function(){"use strict";var o=this.getInstance();if(o)o.maybeLoadJewel()};n.setTitleBadgeCount=function(o){"use strict";if(this.$RequestsJewelController12)this.$RequestsJewelController12.setCount(o)};n.initTitleBadge=function(o,p){"use strict";if(!this.$RequestsJewelController12)c("Arbiter").subscribe(["FriendRequest/delete","FriendRequest/confirm","FriendSuggestion/accepting","FriendSuggestion/ignoring"],function(q,r){return this.decrementTitleBadgeCount(r)}.bind(this));this.$RequestsJewelController12=p};n.decrementTitleBadgeCount=function(o){"use strict";if(this.$RequestsJewelController12)this.$RequestsJewelController12.setCount(this.$RequestsJewelController12.getCount()-1)};n.isOpen=function(){"use strict";var o=this.getInstance();if(o)return o.$RequestsJewelController3();return false};n.create=function(o,p,q){"use strict";!this.$RequestsJewelController13||h(0);return this.$RequestsJewelController13=new n(o,p,q)};n.setupJewelRefresh=function(){"use strict";c("Arbiter").subscribe(["FriendRequest/confirmFromProfile","FriendRequest/deleteFromProfile"],function(o,p){var q={};q.reloadcontent=true;new(c("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(q).setAllowCrossPageTransition(true).send()})};function n(o,p,q){"use strict";__p&&__p();this.$RequestsJewelController3=p;this.$RequestsJewelController2=q;this.$RequestsJewelController1=o;this.$RequestsJewelController5=-1;this.$RequestsJewelController6=-1;this.$RequestsJewelController11=c("Promise").resolve(true);this.$RequestsJewelController9=c("throttle").acrossTransitionsWithBlocking(function(){return this.$RequestsJewelController14({log_impressions:true})}.bind(this),5e3);c("RequestsJewelStore").subscribe("addRequest",this.$RequestsJewelController15.bind(this));c("RequestsJewelStore").subscribe("addNotification",function(){return this.$RequestsJewelController16()}.bind(this));c("RequestsJewelStore").subscribe("removeOldRequest",this.$RequestsJewelController17.bind(this));c("RequestsJewelStore").setupListeners();this.setupScroll();this.$RequestsJewelController18();this.$RequestsJewelController19();this.$RequestsJewelController20()}n.prototype.fromDom=function(){"use strict";__p&&__p();var o={};c("DOMQuery").scry(this.$RequestsJewelController1,"li.objectListItem").forEach(function(p){var q=p.getAttribute("id");if(q){var r=this.$RequestsJewelController21(q);if(r&&r.requester)o[r.requester]=r}}.bind(this));c("RequestsJewelStore").addFriendRequests(o);this.$RequestsJewelController22()};n.prototype.maybeLoadJewel=function(){"use strict";if(this.$RequestsJewelController10){this.$RequestsJewelController10(function(){this.openHandler()}.bind(this));this.$RequestsJewelController10=null}};n.prototype.updateHeight=function(){"use strict";var o=this.$RequestsJewelController23();if(o)o.style.height=this.$RequestsJewelController24()+"px"};n.prototype.markSeen=function(){"use strict";this.$RequestsJewelController11.done(function(){var o=c("DOMQuery").scry(this.$RequestsJewelController1,"li[id]")[0];new(c("AsyncSignal"))(c("XWebGigaboxxUpdateSeenTimeAsyncController").getURIBuilder().setString("folder",this.$RequestsJewelController2).getURI()).send()}.bind(this))};n.prototype.openHandler=function(){"use strict";__p&&__p();if(!this.$RequestsJewelController7&&this.$RequestsJewelController3()){this.$RequestsJewelController7=true;c("EventProfiler").tagCurrentActiveInteractionsAs("FirstRequestsJewelOpen")}c("Arbiter").inform("requestsJewel/opened");var o=c("ge")("fbRequestsJewelLoading"),p=this.$RequestsJewelController23();if(!o&&!p)this.$RequestsJewelController10=c("TimeSlice").getGuardedContinuation("RequestsJewelController clickBeforeE2E continuation");else if(o)this.$RequestsJewelController9();else{var q=c("RequestsJewelStore").getRequestListKeys();if(q.length>0)new(c("AsyncRequest"))().setAllowCrossPageTransition(true).setURI("/friends/requests/log_impressions").setData({ids:q.join(","),ref:"jewel"}).send()}p&&c("ScrollableArea").poke(p);c("JewelQPLogging").onJewelOpened()};n.prototype.closeHandler=function(){"use strict";c("Arbiter").inform("requestsJewel/closed");c("DOMQuery").scry(this.$RequestsJewelController1,"li.jewelItemNew").forEach(function(o){c("CSS").removeClass(o,"jewelItemNew")})};n.prototype.setupScroll=function(){"use strict";var o=this.$RequestsJewelController23();if(o){this.$RequestsJewelController8=this.$RequestsJewelController25();this.$RequestsJewelController4=0;c("ScrollableArea").getInstance(o).subscribe("scroll",this.$RequestsJewelController26.bind(this));this.$RequestsJewelController27();this.$RequestsJewelController28()}};n.prototype.$RequestsJewelController18=function(){"use strict";c("Event").listen(this.$RequestsJewelController1,"submit",function(o){var p=c("Parent").byClass(o.getTarget(),"objectListItem");if(p){c("CSS").removeClass(p,"jewelItemNew");c("CSS").addClass(p,"jewelItemResponded")}})};n.prototype.$RequestsJewelController19=function(){"use strict";c("Event").listen(window,"resize",c("throttle").acrossTransitions(function(){this.updateHeight()}.bind(this)))};n.prototype.$RequestsJewelController20=function(){"use strict";c("Arbiter").subscribe("pymk-x-out",function(o,p){var q=p.location;if(q==="pymk_jewel_first_page"||q==="pymk_jewel")this.$RequestsJewelController27()}.bind(this))};n.prototype.$RequestsJewelController29=function(o){"use strict";var p=parseInt(o,10);return!isNaN(p)?p:null};n.prototype.$RequestsJewelController21=function(o){"use strict";var p=o.match(/^(\d+)_(\d+)/);if(!p)return null;return{requester:this.$RequestsJewelController29(p[1]),type:this.$RequestsJewelController29(p[2])}};n.prototype.$RequestsJewelController30=function(o,p){"use strict";if(o==null||p==null)return null;return o+"_"+p};n.prototype.$RequestsJewelController23=function(){"use strict";return c("DOMQuery").scry(this.$RequestsJewelController1,".uiScrollableArea")[0]};n.prototype.$RequestsJewelController25=function(){"use strict";return c("DOMQuery").scry(this.$RequestsJewelController1,".uiScrollableAreaWrap")[0]};n.prototype.$RequestsJewelController26=function(){"use strict";__p&&__p();var o=c("DOMQuery").scry(this.$RequestsJewelController8,".uiMorePager").pop();if(o){var p=c("getElementPosition")(o).y,q=this.$RequestsJewelController23();if(p>0&&q)c("CSS").addClass(q,"contentAfter");var r=c("DOMQuery").find(o,"a");if(!r)return;var s=c("getElementPosition")(r).y;if(s===this.$RequestsJewelController4)return;var t=c("getElementPosition")(this.$RequestsJewelController8),u=t.y+t.height;if(s-300<u&&s>0){this.$RequestsJewelController4=s;var v=r.getAttribute("ajaxify");if(v)new(c("AsyncRequest"))(v).setRelativeTo(r).setStatusElement(c("Parent").byClass(r,"stat_elem")).send();else if(i)i.getInstance("jewel").showMore()}}this.$RequestsJewelController27();this.$RequestsJewelController28()};n.prototype.$RequestsJewelController27=function(){"use strict";__p&&__p();if(!this.$RequestsJewelController8)return;var o=c("getElementPosition")(this.$RequestsJewelController8),p=o.y+o.height,q=c("DOMQuery").scry(this.$RequestsJewelController1,"li.friendBrowserListUnit"),r=q.length-1;while(r>this.$RequestsJewelController5){var s=c("getElementPosition")(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1}var v=r;while(r>this.$RequestsJewelController5){var w=c("DOMQuery").find(q[r],"input.friendBrowserID"),x=parseInt(w.value,10),y=parseInt(q[r].getAttribute("data-signature"),10);c("PymkFunnelLogger").logImpression(x,y,"pymk_jewel");r--}this.$RequestsJewelController5=Math.max(this.$RequestsJewelController5,v)};n.prototype.$RequestsJewelController28=function(){"use strict";__p&&__p();if(!this.$RequestsJewelController8)return;var o=c("getElementPosition")(this.$RequestsJewelController8),p=o.y+o.height,q=c("DOMQuery").scry(this.$RequestsJewelController1,"li.objectListItem"),r=q.length-1;while(r>this.$RequestsJewelController6){var s=c("getElementPosition")(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1}var v=r;while(r>this.$RequestsJewelController6){var w=q[r].getAttribute("id");w=w.substring(0,w.length-6);c("MarauderLogger").log("request_seen","friend_request_waterfall",{request_id:w,request_location:"requests_jewel"});c("FriendRequestIHEventLogger").logImpression(w);r-=1}this.$RequestsJewelController6=Math.max(this.$RequestsJewelController6,v)};n.prototype.$RequestsJewelController14=function(){var o=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];"use strict";this.$RequestsJewelController11=new(c("Promise"))(function(p,q){var r=!c("ge")("fbRequestsJewelLoading");new(c("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(babelHelpers["extends"]({},o,{reloadcontent:r})).setFinallyHandler(function(s){if(!s.getError())p(true);else q()}).send()})};n.prototype.$RequestsJewelController16=function(){"use strict";if(this.$RequestsJewelController3())return;this.$RequestsJewelController14()};n.prototype.$RequestsJewelController15=function(o,p){var q=p.shouldReplace,r=p.previousType;"use strict";if(!q&&(r||this.$RequestsJewelController3()))return;this.$RequestsJewelController14()};n.prototype.$RequestsJewelController17=function(o,p){__p&&__p();var q=p.requester,r=p.type;"use strict";if(this.$RequestsJewelController3()||c("ge")("fbRequestsJewelLoading")!=null)return;var s=this.$RequestsJewelController30(q,r),t=s&&c("ge")(s);if(t){if(c("CSS").hasClass(t,"jewelItemNew"))c("RequestsJewelStore").decrementCount();if(!c("CSS").hasClass(t,"jewelItemResponded")){c("DOM").remove(t);c("RequestsJewelStore").removeRequest(q);this.$RequestsJewelController22()}}};n.prototype.$RequestsJewelController22=function(){"use strict";c("DOMQuery").scry(this.$RequestsJewelController1,"li.empty").forEach(function(o){c("CSS").conditionShow(o,c("RequestsJewelStore").getRequestCount()<=0)})};n.prototype.$RequestsJewelController24=function(){"use strict";return Math.min(Math.max(c("getViewportDimensions")().height-m,l),k)+j};n.$RequestsJewelController13=null;f.exports=n}),null);
__d("FantaTabMainPlaceholder.react",["cx","React","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(){return c("React").createElement("div",{className:"_59v1"},c("React").createElement("div",{className:"_5qi9 _5qib"},c("React").createElement("div",{className:"_3_9e _s0f _50mz _50m_ fbNub _50-v opened _27_3"},c("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent"},c("React").createElement("div",{className:"fbNubFlyoutOuter"},c("React").createElement("div",{className:"fbNubFlyoutInner"},c("React").createElement("div",{className:"_5-kq"},c("React").createElement(c("XUISpinner.react"),null))))))))};f.exports=i}),null);
__d("FantaTabsSlimApp",["BootloadOnRender.react","ChatPerfInstrumentation","FantaTabMainPlaceholder.react","FantaTabsAppBase","JSResource","LazyComponent.react","React","ReactDOM","WorkplaceChatHelper","emptyFunction","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=void 0;h=babelHelpers.inherits(k,c("FantaTabsAppBase"));i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabsSlimApp1=false,this.$FantaTabsSlimApp3=function(q,r){if(this.$FantaTabsSlimApp1)c("ifRequired")("FantaMessageActions",function(s){c("setImmediate")(function(){s.receivedNewMessage(q,r)})});else this.$FantaTabsSlimApp2(function(){c("ifRequired")("FantaMessageActions",function(s){c("setImmediate")(function(){s.receivedNewMessage(q,r)})})})}.bind(this),m}k.prototype.getPumpedUp=function(l){if(this.$FantaTabsSlimApp1)l();else this.$FantaTabsSlimApp2(l)};k.prototype.silentPumpUp=function(){if(!this.$FantaTabsSlimApp1)this.$FantaTabsSlimApp2(c("emptyFunction"),true)};k.prototype.getViewComponent=function(l){var m=l?c("React").createElement("div",null):c("React").createElement(c("FantaTabMainPlaceholder.react"),null);return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{loadDataOnMount:false}),loader:c("JSResource")("FantaMercuryTabsWithMain.react").__setRef("FantaTabsSlimApp"),placeholder:m})};k.prototype.initializeFantaData=function(l){__p&&__p();e(["FantaCookieUtil","MercuryThreadInformer","PresenceState"],function(m,n,o){__p&&__p();if(!c("WorkplaceChatHelper").suppressChatIfActiveOnDesktop()){o.registerStateLoader(function(p){__p&&__p();var q,r=this;if(this.$FantaTabsSlimApp1)c("ifRequired")("FantaTabActions",function(s){c("ifRequired")("FantaAppStore",function(t){s.loadFromData(m.convertCookieData(p,t.getState().tabGroup,l))})});else(function(){var s=m.convertCookieData(p,null,l);if(s&&s.tabs.length>0)r.$FantaTabsSlimApp2(function(){c("ifRequired")("FantaTabActions",function(t){t.loadFromData(s)})})})()}.bind(this));o.doSync()}n.get().subscribe("threads-updated",function(p,q){c("ifRequired")("FantaGetMessageActions",function(r){Object.keys(q).forEach(function(s){c("setImmediate")(function(){r.refreshThread(s)})})})});c("ChatPerfInstrumentation").logInitData()}.bind(this))};k.prototype.$FantaTabsSlimApp2=function(l,m){__p&&__p();c("ifRequired")("FantaAppStore",function(n){l()},function(){__p&&__p();e(["FantaAppStore","FantaCookieUtil","FantaMessageActions","FantaTabActions","FantaTabViewportManager","PresenceState"],function(n,o,p,q,r,s){__p&&__p();s.registerStateStorer(function(t){var u=n.getState().tabGroup;if(!j||j&&!j.equals(u)){j=u;return o.createCookieData(u,t)}else return t});c("ReactDOM").render(this.getViewComponent(m),this.tabsElem);r.init(this.tabsElem);this.$FantaTabsSlimApp1=true;l()}.bind(this))}.bind(this))};k.prototype.initializeFantaUI=function(){e(["FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(l,m,n,o,p,q){p.init();q.init();l.onMessagesReceived(this.$FantaTabsSlimApp3);c("ChatPerfInstrumentation").logInitUI();c("ChatPerfInstrumentation").logDisplayDone()}.bind(this))};f.exports=new k()}),null);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirrorRecursive")({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});f.exports=h}),null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("MessengerDispatcher"));this.__moduleID=f.id;this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type;switch(l){case c("MNCommerceActionTypes").DIALOG.SHOW:this.$MNCommerceDialogStateStore1=k.dialogContainer;this.$MNCommerceDialogStateStore2=k.state;this.__emitChange();break;case c("MNCommerceActionTypes").DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break}};j.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1};j.prototype.getState=function(){return this.$MNCommerceDialogStateStore2};f.exports=new j()}),null);
__d("PureStoreBasedStateMixin",["invariant","FluxMixinLegacyInstrumentation","StoreBasedStateMixinHelper","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(){__p&&__p();for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];return c("FluxMixinLegacyInstrumentation").addInstrumentation({_callCalculateState:function m(){return this.constructor.calculateState()},getInitialState:function m(){return this._callCalculateState()},UNSAFE_componentWillMount:function m(){__p&&__p();this.constructor.calculateState||h(0);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this._callCalculateState());this._recalculateStateID=null}.bind(this);this._mixin=new(c("StoreBasedStateMixinHelper"))(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=c("setImmediate")(n)}.bind(this))},componentWillUnmount:function m(){this._mixin.release();this._mixin=null}})}.bind(this);f.exports=i}),null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"MNCommerceDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MNCommerceDialogStateStore"))],statics:{calculateState:function i(){var j=c("MNCommerceDialogStateStore").getDialogContainer();return{dialogContainer:j}}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c("React").createElement(j,null)}});f.exports=h}),null);
__d("FBRTCIceStatsParser",[],(function a(b,c,d,e,f,g){__p&&__p();var h=null;i.getInstance=function(){"use strict";if(!h)h=new i();return h};function i(){"use strict"}i.prototype.extractIceInfo=function(j){"use strict";var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)})}return k};i.prototype.$FBRTCIceStatsParser1=function(j){"use strict";return j.indexOf("candidate:")>-1};i.prototype.$FBRTCIceStatsParser2=function(j){"use strict";var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k};i.prototype.$FBRTCIceStatsParser3=function(j){"use strict";var k=j.match(/typ (host|relay|srflx|prflx)/);if(k)return k[1];else return"unknown"};f.exports=i}),null);
__d("FBRTCLogger",["ChannelManager","FBRTCConsoleLogger","MarauderLogger","RTCConfig","VideoCallTypedLogger","pageID"],(function a(b,c,d,e,f,g){__p&&__p();var h="sent_message",i="received_message",j="send_succeeded",k="send_failed",l="info",m="call_action",n="client_event",o="client_error",p="type",q="msg_id",r="ack_msg_id",s="call_id",t="from",u="to",v="content",w="tag",x="peer_id",y="error_code",z="trigger",A="endcallstats",B="channel_session_id",C=null;D.getInstance=function(){"use strict";if(!C)C=new D();return C};D.prototype.logToConsole=function(E){"use strict";this.$FBRTCLogger1(null,null,"Console",E)};D.prototype.logReceivedMessage=function(E,F,G){"use strict";__p&&__p();var H={};H[t]=E;H[s]=F;H[p]=G.type;H[q]=G.msg_id;if(G.sdp)H[v]=G.sdp;if(G.ack_id)H[r]=G.ack_id;if(c("RTCConfig").rtc_message_logging){var I=G.type||G.msgType;new(c("VideoCallTypedLogger"))().setIsClient(true).setEvent("p2p_message_receive").setMessageType(I).setPeerID(E).setCallID(F?F.toString():null).log()}this.$FBRTCLogger2(i,H);this.$FBRTCLogger1(E,F,"Received",G.type+", "+G.msg_id)};D.prototype.logSentMessage=function(E,F,G){"use strict";__p&&__p();var H={};H[u]=E;H[s]=F;H[p]=G.type;H[q]=G.msg_id;if(G.sdp)H[v]=G.sdp;if(G.ack_id)H[r]=G.ack_id;this.$FBRTCLogger2(h,H);this.$FBRTCLogger1(E,F,"Sent",G.type+", "+G.msg_id)};D.prototype.logSentMessageSuccess=function(E,F,G,H){"use strict";var I={};I[x]=E;I[s]=F;I[p]=G;I[q]=H;this.$FBRTCLogger2(j,I)};D.prototype.logSentMessageFailure=function(E,F,G,H,I){"use strict";var J={};J[x]=E;J[s]=F;J[p]=G;J[q]=H;J[y]=I;this.$FBRTCLogger2(k,J);this.$FBRTCLogger1(E,F,"Send Failed",G+", "+I)};D.prototype.logCallAction=function(E,F,G,H,I){"use strict";__p&&__p();var J={};J[x]=E;J[s]=F;J[m]=G;J[v]=H;if(I)J[z]=I;this.$FBRTCLogger2(m,J);this.$FBRTCLogger1(E,F,"CallAction",G+", "+JSON.stringify(H))};D.prototype.logEvent=function(E,F,event){"use strict";var G={};G[x]=E;G[s]=F;G[v]=event;this.$FBRTCLogger2(n,G);this.$FBRTCLogger1(E,F,"Event",JSON.stringify(event))};D.prototype.logInfo=function(E,F,G){"use strict";var H={};H[x]=E;H[s]=F;H[v]=G;this.$FBRTCLogger2(l,H);this.$FBRTCLogger1(E,F,"Info",JSON.stringify(G))};D.prototype.logError=function(E,F,G){"use strict";var H={};H[x]=E;H[s]=F;H[v]=G;this.$FBRTCLogger2(o,H);this.$FBRTCLogger1(E,F,"Error",JSON.stringify(G))};D.prototype.logErrorWithoutID=function(E){"use strict";this.logError(null,null,E)};D.prototype.logEndCallSummary=function(E){"use strict";__p&&__p();if(!E)return;var F={};F[x]=E.peerID;F[s]=E.callID;F[w]=A;F[v]=E.toString();F[B]=c("ChannelManager").getCompleteConfig().sessionID;var G=E.getExtraInfo();for(var H in G)if(Object.prototype.hasOwnProperty.call(G,H))F[H]=G[H];this.$FBRTCLogger2(l,F);this.$FBRTCLogger1(E.peerID,E.callID,"Call Summary",JSON.stringify(F))};D.prototype.$FBRTCLogger2=function(E,F){"use strict";F.page_id=c("pageID");c("FBRTCConsoleLogger").getInstance().getLogHistory().log(E,F);c("MarauderLogger").log(E,c("FBRTCConsoleLogger").MODULE_NAME,F)};D.prototype.$FBRTCLogger1=function(E,F,G,H){"use strict";c("FBRTCConsoleLogger").getInstance().log(H,E,F,G)};function D(){"use strict"}D.CallAction={START_CALL:"start_call",RECEIVED_CALL:"received_call",ANSWER_CALL:"answer_call",END_CALL:"end_call",DENIED_PERMISSION:"denied_permission",SET_MUTE:"set_mute",SET_VIDEO_ON:"set_video_on",SET_SELF_VIEW_ON:"set_self_view_on",SET_FULLSCREEN_ON:"set_fullscreen_on",START_SKYPE:"start_skype",TRY_NEW:"try_new",OPEN_POPUP:"open_popup",POPUP_OPENED:"popup_opened",AUTO_DISABLE_VIDEO:"auto_disable_video",FAILED_GETTING_URI:"failed_getting_uri",OLD_URI:"old_uri",USER_SETTINGS_CHANGED:"user_settings_changed"};D.Trigger={ADMIN_MESSAGE:"admin_message",CHAT_TAB_ICON:"chat_tab_icon",CHAT_TAB_ICON_TOUR:"chat_tab_icon_tour",CHAT_TAB_VOICE_ICON:"chat_tab_voice_icon",SKYPE_DEPRECATION_DIALOG:"skype_deprecation_dialog",REDIAL_BUTTON:"redial_button",RETURN_CALL:"return_call",WEB_MESSENGER:"web_messenger",POPUP_CALL_START_BUTTON:"popup_start_call_button",TIMELINE_PROFILE:"timeline_profile",UNKNOWN:"unknown",RESET_CALL:"install_screen_sharing_ext_dialog",MULTIWAY_CHAT_TAB_SHEET_JOIN_CALL_BUTTON:"multiway_chat_tab_sheet_join_call_button",MULTIWAY_POPUP_START_CALL_BUTTON:"multiway_popup_start_call_button",MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:"multiway_thread_header_audio_button",MULTIWAY_THREAD_HEADER_VIDEO_BUTTON:"multiway_thread_header_video_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_audio_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_audio_call_video_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:"multiway_thread_header_join_video_call_audio_button",MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON:"multiway_thread_header_join_video_call_video_button",MULTIWAY_THREAD_LIST_JOIN_CALL_BUTTON:"multiway_thread_list_join_call_button"};D.Key={DEVICE_INFO:"device_info",RATING:"rating5",RATING_SHOWN:"rating_shown",SURVEY_CHOICE:"survey_choice",SURVEY_DETAILS:"survey_details",SURVEY_SHOWN:"survey_shown",INITIATED_BY_PAGE_ID:"initiated_by_page_id",PEER_IS_MOBILE:"peer_is_mobile",SCREEN_DURATION:"screen_duration"};f.exports=D}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLogger","FBRTCUtils","SiteData","UserAgentData","performanceNow"],(function a(b,c,d,e,f,g){__p&&__p();var h=5*60*1e3,i={CALL_STARTED:"started",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended"},j={MEDIA_REQUESTED:"m_r",MEDIA_SUCCEEDED:"m_s",POPUP_OPENED:"opened",PRESSED_ANSWER:"p_a"},k={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"};function l(m){"use strict";__p&&__p();this.peerID=String(m.peerID);this.callID=String(m.callID);this.$FBRTCCallSummary1=m.isCaller;this.$FBRTCCallSummary2=c("FBRTCUtils").getLocalUploadLogLevel();this.$FBRTCCallSummary12=new Date().valueOf();this.$FBRTCCallSummary3=null;this.$FBRTCCallSummary4={};this.$FBRTCCallSummary6={};this.$FBRTCCallSummary7={};this.$FBRTCCallSummary35=null;this.$FBRTCCallSummary36=null;this.$FBRTCCallSummary37=null;this.$FBRTCCallSummary14=0;this.$FBRTCCallSummary15=0;this.$FBRTCCallSummary34=false;this.$FBRTCCallSummary22={};this.$FBRTCCallSummary23={};this.$FBRTCCallSummary8={};this.$FBRTCCallSummary9={};this.$FBRTCCallSummary10={};this.$FBRTCCallSummary11={};this.$FBRTCCallSummary24=null;this.$FBRTCCallSummary17=c("performanceNow")();this.$FBRTCCallSummary13=0;this.$FBRTCCallSummary5={};this.$FBRTCCallSummary16=this.$FBRTCCallSummary17;this.$FBRTCCallSummary18=0;this.$FBRTCCallSummary19={};this.addExtraInfo(c("FBRTCLogger").Key.DEVICE_INFO,this.$FBRTCCallSummary38());this.$FBRTCCallSummary39();this.$FBRTCCallSummary21=c("FBRTCIceStatsParser").getInstance();this.$FBRTCCallSummary20=c("FBRTCLogger").getInstance()}l.prototype.toJsonString=function(){"use strict";this.$FBRTCCallSummary15=new Date().valueOf();return JSON.stringify({version:l.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,uploadLogLevel:this.$FBRTCCallSummary2,clientVersion:this.$FBRTCCallSummary24,callType:this.$FBRTCCallSummary29,isUsingMultiway:this.$FBRTCCallSummary25,conferenceName:this.$FBRTCCallSummary27,activeConn:this.$FBRTCCallSummary26,escP2PCallID:this.$FBRTCCallSummary28,escConfName:this.$FBRTCCallSummary31,serverInfoData:this.$FBRTCCallSummary30,localVideoDuration:this.$FBRTCCallSummary32,remoteVideoDuration:this.$FBRTCCallSummary33,startTime:this.$FBRTCCallSummary12,trigger:this.$FBRTCCallSummary3,signalingTime:this.$FBRTCCallSummary4,escStateTimes:this.$FBRTCCallSummary6,applicationEventTime:this.$FBRTCCallSummary7,endCallReason:this.$FBRTCCallSummary35,endCallSubreason:this.$FBRTCCallSummary36,isRemoteEnded:this.$FBRTCCallSummary37,lastUpdatedTime:this.$FBRTCCallSummary14,lastSerializedTime:this.$FBRTCCallSummary15,unsetOnRetrieve:this.$FBRTCCallSummary34,openCount:this.$FBRTCCallSummary18,extraInfo:this.$FBRTCCallSummary19,pcStats:this.$FBRTCCallSummary22,captureStats:this.$FBRTCCallSummary23,gen0IceSentCount:this.$FBRTCCallSummary8,gen0IceReceivedCount:this.$FBRTCCallSummary9,iceSentCount:this.$FBRTCCallSummary10,iceReceivedCount:this.$FBRTCCallSummary11,newSignalingTime:this.$FBRTCCallSummary5,accumulatedCallTime:this.$FBRTCCallSummary40()})};l.fromJsonString=function(m){"use strict";__p&&__p();var n=void 0;try{n=JSON.parse(m)}catch(o){return null}if(n.version!==l.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(n,"peerID")||!Object.prototype.hasOwnProperty.call(n,"callID")||!Object.prototype.hasOwnProperty.call(n,"isCaller")||!Object.prototype.hasOwnProperty.call(n,"startTime")||!Object.prototype.hasOwnProperty.call(n,"trigger")||!Object.prototype.hasOwnProperty.call(n,"signalingTime")||!Object.prototype.hasOwnProperty.call(n,"endCallReason")||!Object.prototype.hasOwnProperty.call(n,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(n,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(n,"lastSerializedTime"))return null;var p=new l({peerID:n.peerID,callID:n.callID,isCaller:n.isCaller});p.$FBRTCCallSummary2=n.uploadLogLevel;p.$FBRTCCallSummary24=n.clientVersion;p.$FBRTCCallSummary12=n.startTime;p.$FBRTCCallSummary3=n.trigger;p.$FBRTCCallSummary4=n.signalingTime;p.$FBRTCCallSummary35=n.endCallReason;p.$FBRTCCallSummary36=n.endCallSubreason;p.$FBRTCCallSummary37=n.isRemoteEnded;p.$FBRTCCallSummary14=n.lastUpdatedTime;p.$FBRTCCallSummary15=n.lastSerializedTime;if(n.callType)p.$FBRTCCallSummary29=n.callType;if(n.isUsingMultiway!=null)p.$FBRTCCallSummary25=n.isUsingMultiway;if(n.conferenceName)p.$FBRTCCallSummary27=n.conferenceName;if(n.escP2PCallID)p.$FBRTCCallSummary28=n.escP2PCallID;if(n.activeConn)p.$FBRTCCallSummary26=n.activeConn;if(n.escConfName)p.$FBRTCCallSummary31=n.escConfName;if(n.serverInfoData)p.$FBRTCCallSummary30=n.serverInfoData;if(n.localVideoDuration)p.$FBRTCCallSummary32=n.localVideoDuration;if(n.remoteVideoDuration)p.$FBRTCCallSummary33=n.remoteVideoDuration;if(n.unsetOnRetrieve)p.$FBRTCCallSummary34=n.unsetOnRetrieve;if(n.openCount)p.$FBRTCCallSummary18=n.openCount;if(n.extraInfo)p.$FBRTCCallSummary19=n.extraInfo;if(n.pcStats)p.$FBRTCCallSummary22=n.pcStats;if(n.captureStats)p.$FBRTCCallSummary23=n.captureStats;if(n.gen0IceSentCount)p.$FBRTCCallSummary8=n.gen0IceSentCount;if(n.gen0IceReceivedCount)p.$FBRTCCallSummary9=n.gen0IceReceivedCount;if(n.iceSentCount)p.$FBRTCCallSummary10=n.iceSentCount;if(n.iceReceivedCount)p.$FBRTCCallSummary11=n.iceReceivedCount;if(n.newSignalingTime)p.$FBRTCCallSummary5=n.newSignalingTime;if(n.accumulatedCallTime)p.$FBRTCCallSummary13=n.accumulatedCallTime;if(n.escStateTimes)p.$FBRTCCallSummary6=n.escStateTimes;if(n.applicationEventTime)p.$FBRTCCallSummary7=n.applicationEventTime;return p};l.restoreOrInitialize=function(m,n,o,p,q,r){"use strict";__p&&__p();n=String(n);o=String(o);var s=m.retrieveCallSummary(n,o);if(!s){s=new l({peerID:n,callID:o,isCaller:p});if(q){s.onFullMessageReceived({msg:q});s.onOfferAckSent(q)}else s.onCallStarted(r||c("FBRTCLogger").Trigger.UNKNOWN);c("FBRTCLogger").getInstance().logError(n,o,"Missing call summary from storage")}else if(s.$FBRTCCallSummary34){s.$FBRTCCallSummary35=null;s.$FBRTCCallSummary36=null;s.$FBRTCCallSummary37=null;delete s.$FBRTCCallSummary4[i.CALL_ENDED];delete s.$FBRTCCallSummary5[i.CALL_ENDED];s.$FBRTCCallSummary34=null}return s};l.logSavedSummaries=function(m){"use strict";__p&&__p();var n=m.getLoggableSummaries(),o=n.length;if(o<=0)return;var p=c("FBRTCLogger").getInstance(),q=[];for(var r=0;r<o;r++){var s=n[r];p.logEndCallSummary(s);q.push({peerID:s.peerID,callID:s.callID})}m.removeCallSummaries(q);p.logToConsole("Logged pending summaries: "+o)};l.prototype.save=function(m){"use strict";var n=c("performanceNow")(),o=n-this.$FBRTCCallSummary16;if(o>h){this.$FBRTCCallSummary20.logInfo(this.peerID,this.callID,"Summary too old: "+o);return}m.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary16=n};l.prototype.getLastUpdatedTime=function(){"use strict";return this.$FBRTCCallSummary14};l.prototype.setLastUpdatedTime=function(m){"use strict";this.$FBRTCCallSummary14=m};l.prototype.getExtraInfo=function(){"use strict";return this.$FBRTCCallSummary19};l.prototype.getCallTrigger=function(){"use strict";return this.$FBRTCCallSummary3};l.prototype.addExtraInfo=function(m,n){"use strict";this.$FBRTCCallSummary19[m]=n;this.$FBRTCCallSummary39()};l.prototype.isCaller=function(){"use strict";return this.$FBRTCCallSummary1};l.prototype.isNetworkReady=function(){"use strict";if(this.$FBRTCCallSummary4[i.NETWORK_READY])return true;else return false};l.prototype.isAnswerReceived=function(){"use strict";if(this.$FBRTCCallSummary4[i.RECV_ANSWER])return true;else return false};l.prototype.onCallStarted=function(m){"use strict";this.$FBRTCCallSummary3=m;this.$FBRTCCallSummary41(i.CALL_STARTED);this.$FBRTCCallSummary39()};l.prototype.onPopupOpened=function(){"use strict";this.$FBRTCCallSummary42(j.POPUP_OPENED);this.$FBRTCCallSummary18++;this.$FBRTCCallSummary39()};l.prototype.onPressedAnswer=function(){"use strict";this.$FBRTCCallSummary42(j.PRESSED_ANSWER);this.$FBRTCCallSummary39()};l.prototype.onMediaRequested=function(){"use strict";this.$FBRTCCallSummary42(j.MEDIA_REQUESTED);this.$FBRTCCallSummary39()};l.prototype.onMediaSucceeded=function(){"use strict";this.$FBRTCCallSummary42(j.MEDIA_SUCCEEDED);this.$FBRTCCallSummary39()};l.prototype.setPcStats=function(m){"use strict";this.$FBRTCCallSummary22=m;this.$FBRTCCallSummary39()};l.prototype.setVideoCaptureStats=function(m,n){"use strict";this.$FBRTCCallSummary23={w:m,h:n};this.$FBRTCCallSummary39()};l.prototype.setVideoCaptureConstraints=function(m){"use strict";this.$FBRTCCallSummary23=m;this.$FBRTCCallSummary39()};l.prototype.setUploadLogLevel=function(m){"use strict";this.$FBRTCCallSummary2=m;this.$FBRTCCallSummary39()};l.prototype.getCallType=function(){"use strict";return this.$FBRTCCallSummary29};l.prototype.setCallType=function(m){"use strict";this.$FBRTCCallSummary29=m;this.addExtraInfo("call_type",m);this.$FBRTCCallSummary39()};l.prototype.setVideoDurations=function(m,n){"use strict";this.$FBRTCCallSummary32=m;this.$FBRTCCallSummary33=n;this.$FBRTCCallSummary39()};l.prototype.setScreenDuration=function(m){"use strict";this.addExtraInfo(c("FBRTCLogger").Key.SCREEN_DURATION,m)};l.prototype.setIsUsingMultiway=function(m){"use strict";this.$FBRTCCallSummary25=m;this.$FBRTCCallSummary39()};l.prototype.setConferenceName=function(m){"use strict";this.$FBRTCCallSummary27=m;this.$FBRTCCallSummary39()};l.prototype.setServerInfoData=function(m){"use strict";this.$FBRTCCallSummary30=m;this.$FBRTCCallSummary39()};l.prototype.setActiveConnection=function(m){"use strict";this.$FBRTCCallSummary26=m;this.$FBRTCCallSummary39()};l.prototype.setEscalationP2PCallID=function(m){"use strict";this.$FBRTCCallSummary28=m;this.$FBRTCCallSummary39()};l.prototype.setEscalationConferenceName=function(m){"use strict";this.$FBRTCCallSummary31=m;this.$FBRTCCallSummary39()};l.prototype.onOfferAckSent=function(m){"use strict";this.onMessageSent({type:c("FBRTCConstants").PayloadType.OFFER_ACK,flag:m.flag})};l.prototype.onMessageSent=function(m){"use strict";__p&&__p();var n=m.flag===1;switch(m.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary43(n,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary44(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary43(n,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary44(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary41(i.SENT_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary41(i.SENT_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary43(n,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary43(n,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary44(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;default:}this.$FBRTCCallSummary39()};l.prototype.$FBRTCCallSummary44=function(m,n,o){"use strict";var p=null,q=null,r=this.$FBRTCCallSummary21.extractIceInfo(m.sdp);for(var s=0;s<r.length;s++){p=r[s].gen;q=r[s].type;if(p===0)this.$FBRTCCallSummary45(n,q);this.$FBRTCCallSummary45(o,q)}};l.prototype.$FBRTCCallSummary45=function(m,n){"use strict";if(!m[n])m[n]=1;else m[n]=m[n]+1};l.prototype.$FBRTCCallSummary46=function(m){"use strict";this.addExtraInfo(c("FBRTCLogger").Key.PEER_IS_MOBILE,m.isFromMobile()?"1":"0")};l.prototype.onFullMessageReceived=function(m){"use strict";__p&&__p();var n=m.msg,o=n.flag===1;switch(n.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary46(m);this.$FBRTCCallSummary43(o,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary44(n,this.$FBRTCCallSummary9,this.$FBRTCCallSummary11);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary46(m);this.$FBRTCCallSummary43(o,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary44(n,this.$FBRTCCallSummary9,this.$FBRTCCallSummary11);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary41(i.RECV_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary41(i.RECV_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary43(o,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary43(o,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary44(n,this.$FBRTCCallSummary9,this.$FBRTCCallSummary11);break;default:}this.$FBRTCCallSummary39()};l.prototype.onMsgAckReceived=function(m,n){"use strict";var o=m.msg.flag===1;if(n)this.$FBRTCCallSummary43(o,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);else this.$FBRTCCallSummary43(o,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK)};l.prototype.onNetworkReady=function(){"use strict";this.$FBRTCCallSummary41(i.NETWORK_READY);this.$FBRTCCallSummary39()};l.prototype.onCallConnected=function(){"use strict";this.$FBRTCCallSummary41(i.CALL_CONNECTED);this.$FBRTCCallSummary39()};l.prototype.onCallEnded=function(m,n,o,p){"use strict";this.$FBRTCCallSummary34=o;this.$FBRTCCallSummary35=String(m);this.$FBRTCCallSummary36=p;this.$FBRTCCallSummary37=n;this.$FBRTCCallSummary41(i.CALL_ENDED);this.$FBRTCCallSummary39()};l.prototype.setOfferSentTime=function(){"use strict";this.$FBRTCCallSummary41(i.SENT_OFFER)};l.prototype.setOfferAckReceivedTime=function(){"use strict";this.$FBRTCCallSummary41(i.RECV_OFFER_ACK)};l.prototype.setAnswerSentTime=function(){"use strict";this.$FBRTCCallSummary41(i.SENT_ANSWER)};l.prototype.setAnswerReceivedTime=function(){"use strict";this.$FBRTCCallSummary41(i.RECV_ANSWER)};l.prototype.setEscalationAvailable=function(){"use strict";this.$FBRTCCallSummary47(k.ESCALATION_IS_AVAILABLE)};l.prototype.setEscalationInitiated=function(){"use strict";this.$FBRTCCallSummary47(k.USER_INITIATED_REQUEST)};l.prototype.setReceivedEscalationRequest=function(){"use strict";this.$FBRTCCallSummary47(k.RECEIVED_INCOMING_REQUEST)};l.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$FBRTCCallSummary47(k.REJECTED_INVALID_P2P_STATE)};l.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$FBRTCCallSummary47(k.CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$FBRTCCallSummary47(k.CONNECTED_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$FBRTCCallSummary47(k.PEER_CONNECTING_TO_MULTIWAY)};l.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$FBRTCCallSummary47(k.PEER_CONNECTED_TO_MULTIWAY)};l.prototype.setReadyToEscalate=function(){"use strict";this.$FBRTCCallSummary47(k.READY_TO_ESCALATE)};l.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$FBRTCCallSummary47(k.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};l.prototype.setEscalationTimedOut=function(){"use strict";this.$FBRTCCallSummary47(k.TIMED_OUT)};l.prototype.toString=function(){"use strict";var m={};m.core_metrics=this.$FBRTCCallSummary48();m.time_series=null;return JSON.stringify(m)};l.prototype.$FBRTCCallSummary48=function(){"use strict";__p&&__p();var m={};m.ver=l.CURRENT_SUMMARY_VERSION;m.log_level=c("FBRTCConstants").uploadLogLevelString(this.$FBRTCCallSummary2);m.caller=this.$FBRTCCallSummary1;m.call_type=this.$FBRTCCallSummary29;m.is_using_multiway=this.$FBRTCCallSummary25;m.active_conn=this.$FBRTCCallSummary26;m.app_event_times=this.$FBRTCCallSummary7;m.conf_name=this.$FBRTCCallSummary27;m.esc_p2p_call_id=this.$FBRTCCallSummary28;m.esc_state_times=this.$FBRTCCallSummary6;m.esc_conf_name=this.$FBRTCCallSummary31;m.serv_info=this.$FBRTCCallSummary30;m.conn=this.$FBRTCCallSummary49();m.peer_id=this.peerID;m.has_video=true;m.open_count=this.$FBRTCCallSummary18;m.signaling=this.$FBRTCCallSummary50();m.sender=this.$FBRTCCallSummary51();m.receiver=this.$FBRTCCallSummary52();m.end=this.$FBRTCCallSummary53();m.video=this.$FBRTCCallSummary54();m.push_phase=c("SiteData").push_phase;m.client_version=this.$FBRTCCallSummary24;return m};l.prototype.$FBRTCCallSummary49=function(){"use strict";var m={dtls:1};if(this.$FBRTCCallSummary22.sender&&this.$FBRTCCallSummary22.sender.rtt)m.rtt=this.$FBRTCCallSummary22.sender.rtt;return m};l.prototype.$FBRTCCallSummary50=function(){"use strict";__p&&__p();var m={};if(this.$FBRTCCallSummary3)m.trigger=this.$FBRTCCallSummary3;m.start_time=this.$FBRTCCallSummary12;m.time_from_start=this.$FBRTCCallSummary4;var n=this.$FBRTCCallSummary4[i.CALL_CONNECTED],o=this.$FBRTCCallSummary4[i.CALL_ENDED];if(n){if(!o)if(this.$FBRTCCallSummary15)o=this.$FBRTCCallSummary15-this.$FBRTCCallSummary12;else o=this.$FBRTCCallSummary55();var p=o-n;if(p>0)m.duration=p}m.new_time_from_start=this.$FBRTCCallSummary5;n=this.$FBRTCCallSummary5[i.CALL_CONNECTED];o=this.$FBRTCCallSummary5[i.CALL_ENDED];if(n){if(!o)if(this.$FBRTCCallSummary13>0)o=this.$FBRTCCallSummary13;else o=this.$FBRTCCallSummary40();var q=o-n;if(q>0)m.new_duration=q}return m};l.prototype.$FBRTCCallSummary51=function(){"use strict";var m={};if(this.$FBRTCCallSummary8)m.ice_g0=this.$FBRTCCallSummary8;if(this.$FBRTCCallSummary10)m.ice=this.$FBRTCCallSummary10;if(this.$FBRTCCallSummary22.sender)Object.assign(m,this.$FBRTCCallSummary22.sender);return m};l.prototype.$FBRTCCallSummary52=function(){"use strict";var m={};if(this.$FBRTCCallSummary9)m.ice_g0=this.$FBRTCCallSummary9;if(this.$FBRTCCallSummary11)m.ice=this.$FBRTCCallSummary11;return m};l.prototype.$FBRTCCallSummary53=function(){"use strict";__p&&__p();var m={};if(this.$FBRTCCallSummary35!==null){m.end_call_reason_string=c("FBRTCConstants").callEndReasonString(this.$FBRTCCallSummary35);if(this.$FBRTCCallSummary36!==null)m.end_call_subreason_string=this.$FBRTCCallSummary36;m.remote_ended=this.$FBRTCCallSummary37}if(this.$FBRTCCallSummary22.end)Object.assign(m,this.$FBRTCCallSummary22.end);return m};l.prototype.$FBRTCCallSummary54=function(){"use strict";var m={capture:{}};if(this.$FBRTCCallSummary22.video&&this.$FBRTCCallSummary22.video.sender)Object.assign(m,this.$FBRTCCallSummary22.video.sender);if(this.$FBRTCCallSummary23)Object.assign(m.capture,this.$FBRTCCallSummary23);return{sender:m,ld:this.$FBRTCCallSummary32,rd:this.$FBRTCCallSummary33}};l.prototype.$FBRTCCallSummary55=function(){"use strict";return new Date().valueOf()-this.$FBRTCCallSummary12};l.prototype.$FBRTCCallSummary40=function(){"use strict";var m=c("performanceNow")()-this.$FBRTCCallSummary17;return Math.floor(this.$FBRTCCallSummary13+m)};l.prototype.$FBRTCCallSummary41=function(m){"use strict";if(this.$FBRTCCallSummary4[m])return;this.$FBRTCCallSummary4[m]=this.$FBRTCCallSummary55();this.$FBRTCCallSummary5[m]=this.$FBRTCCallSummary40()};l.prototype.$FBRTCCallSummary47=function(m){"use strict";if(this.$FBRTCCallSummary6[m])return;this.$FBRTCCallSummary6[m]=this.$FBRTCCallSummary55()};l.prototype.$FBRTCCallSummary42=function(event){"use strict";if(this.$FBRTCCallSummary7[event])return;this.$FBRTCCallSummary7[event]=this.$FBRTCCallSummary55()};l.prototype.$FBRTCCallSummary43=function(m,n,o){"use strict";if(m)this.$FBRTCCallSummary41(o);else this.$FBRTCCallSummary41(n)};l.prototype.$FBRTCCallSummary39=function(){"use strict";this.$FBRTCCallSummary14=new Date().valueOf()};l.prototype.$FBRTCCallSummary38=function(){"use strict";return{device:c("UserAgentData").deviceName,os:c("UserAgentData").platformName,os_version:c("UserAgentData").platformFullVersion,browser:c("UserAgentData").browserName,browser_version:c("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};l.prototype.setClientVersion=function(m){"use strict";this.$FBRTCCallSummary24=m};l.prototype.getCallDuration=function(){"use strict";var m=this.$FBRTCCallSummary50();return m.duration?m.duration:0};l.CURRENT_SUMMARY_VERSION=19;f.exports=l}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBRTCCallSummary","FBRTCLogger","areEqual"],(function a(b,c,d,e,f,g){__p&&__p();var h="localstorage",i="RTC_CALL_SUMMARY_",j="summary",k=2e3,l=3,m=3*60*1e3,n=null;o.getInstance=function(){"use strict";if(!n)n=new o();return n};function o(){"use strict";this.$FBRTCCallSummaryStore1=new(c("CacheStorage"))(h,i);this.$FBRTCCallSummaryStore2=c("FBRTCLogger").getInstance()}o.prototype.storeCallSummary=function(p,q,r){"use strict";__p&&__p();var s=this;this.$FBRTCCallSummaryStore3(function(t){__p&&__p();if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole("Outdated summaries");return null}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q))};o.prototype.retrieveCallSummary=function(p,q){"use strict";var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s)return this.$FBRTCCallSummaryStore4(s);else return null};o.prototype.removeCallSummary=function(p,q){"use strict";this.removeCallSummaries([{peerID:p,callID:q}])};o.prototype.removeCallSummaries=function(p){"use strict";__p&&__p();var q=this;this.$FBRTCCallSummaryStore3(function(r){__p&&__p();var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u]}}return r},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null))};o.prototype.getLoggableSummaries=function(){"use strict";__p&&__p();var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(Object.prototype.hasOwnProperty.call(p,r))for(var s in p[r])if(Object.prototype.hasOwnProperty.call(p[r],s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t)}return q};o.prototype.$FBRTCCallSummaryStore7=function(p){"use strict";for(var q in p)if(Object.prototype.hasOwnProperty.call(p,q))return false;return true};o.prototype.$FBRTCCallSummaryStore5=function(p){"use strict";var q={__t:Date.now(),__d:p.toJsonString()};return q};o.prototype.$FBRTCCallSummaryStore4=function(p,q){"use strict";if(p)if(!q||Date.now()-p.__t>=q)return c("FBRTCCallSummary").fromJsonString(p.__d);return null};o.prototype.$FBRTCCallSummaryStore6=function(){"use strict";var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){__p&&__p();var t,u=this;"use strict";if(r===undefined||r===null)r=l;var v=this.$FBRTCCallSummaryStore6(),w=this.$FBRTCCallSummaryStore6(),x=p(v);if(x===null)return;var y=this.$FBRTCCallSummaryStore6();if(c("areEqual")(w,y)){this.$FBRTCCallSummaryStore1.set(j,x);this.$FBRTCCallSummaryStore2.logToConsole("Updated summaries")}else if(r>0){q("Retry lock");if(s)(function(){var z=u;setTimeout(function(){z.$FBRTCCallSummaryStore3(p,q,r-1,true)},k)})();else this.$FBRTCCallSummaryStore3(p,q,r-1,true)}else q("Failed to lock")};f.exports=o}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c("FBRTCCallSummaryStore").getInstance();c("Banzai").subscribe(c("Banzai").SEND,function(){c("FBRTCCallSummary").logSavedSummaries(j)})}};f.exports=h}),null);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){i.constructor.call(this);j=c("P2PDispatcher").register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null}}l.prototype.getState=function(){return k};l.prototype.onEventDispatched=function(m){__p&&__p();var n=m.type,o=m.data;switch(n){case c("P2PActionConstants").DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit("change");break;case c("P2PActionConstants").DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit("change");break}};f.exports=new l()}),null);
__d("P2PDialogContainer.react",["P2PDialogStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c("P2PDialogStore").getState(),this.onDialogStoreChange=function(){this.setState(c("P2PDialogStore").getState())}.bind(this),l}j.prototype.componentDidMount=function(){this.dialogStoreSub=c("P2PDialogStore").addListener("change",this.onDialogStoreChange)};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};f.exports=j}),null);
__d("PagesPlatformActionConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({BOOKING_REQUEST_ACCEPT_ERROR:"booking_request_accept_error",BOOKING_REQUEST_ACCEPT_INITIATED:"booking_request_accept_initiated",BOOKING_REQUEST_ACCEPTED:"booking_request_accepted",BOOKING_REQUEST_CREATED:"booking_request_created",BOOKING_REQUEST_DECLINE_ERROR:"booking_request_decline_error",BOOKING_REQUEST_DECLINE_INITIATED:"booking_request_decline_initiated",BOOKING_REQUEST_DECLINED:"booking_request_declined",BOOKING_REQUEST_RESCHEDULE_INITIATED:"booking_request_reschedule_initiated",BOOKING_REQUEST_RESCHEULED:"booking_request_reschedule",DIALOG_CLOSED:"dialog_closed",DIALOG_SHOWN:"dialog_shown",NEW_TIME_CHOSEN:"new_time_chosen"});f.exports=h}),null);
__d("PagesPlatformRequestDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("Dispatcher_DEPRECATED"))()}),null);
__d("PagesPlatformDialogStore",["EventEmitter","PagesPlatformActionConstants","PagesPlatformRequestDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j={};h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(){i.constructor.call(this);c("PagesPlatformRequestDispatcher").register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null}}k.prototype.getState=function(){return j};k.prototype.onEventDispatched=function(l){__p&&__p();var m=l.type,n=l.data;switch(m){case c("PagesPlatformActionConstants").DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit("change");break;case c("PagesPlatformActionConstants").DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit("change");break}};f.exports=new k()}),null);
__d("PagesPlatformDialogContainer.react",["PagesPlatformDialogStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"PagesPlatformDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("PagesPlatformDialogStore"))],statics:{calculateState:function i(){return c("PagesPlatformDialogStore").getState()}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c("React").createElement(j,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))}});f.exports=h}),null);
__d("FBPaymentsDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("FBPaymentsDialogActions",["FBPaymentsDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h={types:c("keyMirror")({SHOW_DIALOG:null,HIDE_DIALOG:null}),showDialog:function i(j,k){c("FBPaymentsDispatcher").dispatch({type:h.types.SHOW_DIALOG,data:{dialogClass:j,dialogProps:k}})},hideDialog:function i(){c("FBPaymentsDispatcher").dispatch({type:h.types.HIDE_DIALOG,data:{}})}};f.exports=h}),null);
__d("FBPaymentsDialogStore",["FBPaymentsDialogActions","FBPaymentsDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("FBPaymentsDispatcher"));this.__moduleID=f.id;this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null}}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c("FBPaymentsDialogActions").types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c("FBPaymentsDialogActions").types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1};f.exports=new j()}),null);
__d("FBPaymentsDialogContainer.react",["FBPaymentsDialogStore","FBPaymentsDispatcher","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.calculateState=function(){return c("FBPaymentsDialogStore").getState()};j.getStores=function(){return[c("FBPaymentsDialogStore")]};j.prototype.UNSAFE_componentWillMount=function(){c("FBPaymentsDispatcher").explicitlyRegisterStore(c("FBPaymentsDialogStore"))};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("RTCCallState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NO_ONGOING_CALL:"NO_ONGOING_CALL",AUDIO_GROUP_CALL:"AUDIO_GROUP_CALL",VIDEO_GROUP_CALL:"VIDEO_GROUP_CALL"})}),null);